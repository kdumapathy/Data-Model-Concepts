<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìä Enterprise Data Model for Data Products, BI & Analytics</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            width: 100%;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            box-sizing: border-box;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 30px;
        }
        .diagram-container {
            background: #ffffff;
            padding: 30px;
            margin: 30px 0;
            border-radius: 15px;
            border: 3px solid #e9ecef;
            overflow-x: auto;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        .mermaid {
            display: block;
            width: 100%;
            min-height: 600px;
        }
        .mermaid svg {
            max-width: 100%;
            height: auto;
        }
        .print-button {
            text-align: center;
            margin: 30px 0;
        }
        .print-button button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            transition: all 0.3s;
        }
        .print-button button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        @media print {
            body {
                background: white;
            }
            .print-button {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä Enterprise Data Model for Data Products, BI & Analytics</h1>
        
        <div class="print-button">
            <button onclick="window.print()">üñ®Ô∏è Print Diagram</button>
        </div>
        
        <div class="diagram-container">
            <div class="mermaid">
erDiagram
    %% ENTERPRISE DATA MODEL - Process + Analytical + Genealogy
    
    %% === FACTS ===
    FACT_MANUFACTURING_PROCESS_RESULT["Manufacturing Process Result"]
    FACT_ANALYTICAL["Analytical Result"]
    FACT_BATCH_MATERIAL_USAGE["Batch Material Usage"]
    
    %% === CONFORMED DIMENSIONS ===
    BATCH["Batch"]
    SAMPLE["Sample"]
    MATERIAL["Material"]
    MANUFACTURER["Manufacturer"]
    SPECIFICATION["Specification"]
    NOTIFICATION["Notification"]
    DOCUMENT["Document"]
    SOURCE_SYSTEM["Source System"]
    
    %% === PROCESS-SPECIFIC DIMENSIONS ===
    LOCAL_PROCESS_HIERARCHY["Local Process Hierarchy"]
    COMMON_PROCESS_HIERARCHY["Common Process Hierarchy"]
    
    %% === ANALYTICAL-SPECIFIC DIMENSIONS ===
    TEST["Test"]
    TEST_LOCATION["Test Location"]
    ANALYTICAL_METHOD["Analytical Method"]
    CONDITION["Condition"]
    TIME_POINT["Time Point"]
    STUDY["Study"]
    
    %% === GENEALOGY DIMENSIONS ===
    MATERIAL_LOT["Material Lot"]
    TRANSFORMATION["Transformation"]
    PRODUCTION_ORDER["Production Order"]
    
    %% === BRIDGE TABLES ===
    BATCH_GENEALOGY["Batch Genealogy"]
    
    %% === SELF-JOIN HIERARCHIES ===
    BATCH ||--o| BATCH : "parent batch of"
    MATERIAL ||--o| MATERIAL : "child component of"
    LOCAL_PROCESS_HIERARCHY ||--o| LOCAL_PROCESS_HIERARCHY : "parent operation of"
    COMMON_PROCESS_HIERARCHY ||--o| COMMON_PROCESS_HIERARCHY : "parent procedure of"

    %% === BRIDGE RELATIONSHIPS ===
    BATCH ||--o{ BATCH_GENEALOGY : "child batch in lineage"
    BATCH_GENEALOGY }o--|| BATCH : "parent batch in lineage"
    
    %% === SUPPORTING RELATIONSHIPS ===
    MATERIAL ||--o{ BATCH : "input to batch"
    MATERIAL ||--o{ MATERIAL_LOT : "instantiated as lot"
    PRODUCTION_ORDER ||--o{ BATCH : "manufactures batch"
    
    %% === PROCESS FACT RELATIONSHIPS ===
    LOCAL_PROCESS_HIERARCHY ||--o{ FACT_MANUFACTURING_PROCESS_RESULT : "defines unit operation"
    COMMON_PROCESS_HIERARCHY ||--o{ FACT_MANUFACTURING_PROCESS_RESULT : "defines procedure"

    FACT_MANUFACTURING_PROCESS_RESULT }o--|| BATCH : "executed for"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| SAMPLE : "sampled from"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| MATERIAL : "consumed material"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| MANUFACTURER : "executed by manufacturer"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| SPECIFICATION : "evaluated against"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| NOTIFICATION : "generated notification"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| DOCUMENT : "recorded in"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| SOURCE_SYSTEM : "originated in"
    
    %% === ANALYTICAL FACT RELATIONSHIPS ===
    BATCH ||--o{ FACT_ANALYTICAL : "analyzed by"
    SAMPLE ||--o{ FACT_ANALYTICAL : "subjected to analysis"
    MATERIAL ||--o{ FACT_ANALYTICAL : "material tested"
    MANUFACTURER ||--o{ FACT_ANALYTICAL : "produced by"
    SPECIFICATION ||--o{ FACT_ANALYTICAL : "compared to specification"
    NOTIFICATION ||--o{ FACT_ANALYTICAL : "notified via"
    DOCUMENT ||--o{ FACT_ANALYTICAL : "recorded in"
    SOURCE_SYSTEM ||--o{ FACT_ANALYTICAL : "originated in"

    FACT_ANALYTICAL }o--|| ANALYTICAL_METHOD : "performed by method"
    FACT_ANALYTICAL }o--|| TEST : "executes test method"
    FACT_ANALYTICAL }o--|| TEST_LOCATION : "performed at location"
    FACT_ANALYTICAL }o--|| CONDITION : "tested under conditions"
    FACT_ANALYTICAL }o--|| TIME_POINT : "collected at timepoint"
    FACT_ANALYTICAL }o--|| STUDY : "conducted in study"
    
    %% === GENEALOGY FACT RELATIONSHIPS ===
    BATCH ||--o{ FACT_BATCH_MATERIAL_USAGE : "utilized in batch"
    MATERIAL_LOT ||--o{ FACT_BATCH_MATERIAL_USAGE : "consumed as lot"
    TRANSFORMATION ||--o{ FACT_BATCH_MATERIAL_USAGE : "processed by transformation"
            </div>
        </div>
    </div>
    
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                fontSize: '16px'
            }
        });
    </script>
</body>
</html>
