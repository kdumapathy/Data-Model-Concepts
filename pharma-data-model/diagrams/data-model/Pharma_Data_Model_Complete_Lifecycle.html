<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pharma Data Model - Discovery to Commercial | Complete Lifecycle Architecture</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            scroll-behavior: smooth;
        }
        .container {
            max-width: 1900px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            font-size: 2.8em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            font-size: 1.3em;
            margin-bottom: 30px;
        }
        h2 {
            color: #34495e;
            margin-top: 50px;
            padding: 15px 20px;
            background: linear-gradient(to right, #667eea, #764ba2);
            color: white;
            border-radius: 10px;
            font-size: 1.8em;
            scroll-margin-top: 100px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        .diagram-container {
            background: #ffffff;
            padding: 30px;
            margin: 30px 0;
            border-radius: 15px;
            border: 3px solid #e9ecef;
            overflow: auto;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        .description {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-left: 5px solid #ff6b6b;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            font-size: 1.1em;
            line-height: 1.6;
        }
        .mermaid {
            transform-origin: top left;
            transition: transform 0.3s ease;
            display: inline-block;
            min-width: 100%;
        }
        nav {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            padding: 20px;
            margin: -40px -40px 40px -40px;
            border-radius: 15px 15px 0 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }
        nav a {
            color: white;
            text-decoration: none;
            margin: 0 12px;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s;
            display: inline-block;
            font-weight: 500;
            font-size: 0.9em;
            border: 2px solid transparent;
        }
        nav a:hover {
            background: rgba(255,255,255,0.1);
            border-color: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        .legend-box {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
            color: white;
            box-shadow: 0 4px 20px rgba(245, 87, 108, 0.3);
        }
        .legend-box h3 {
            margin-top: 0;
            font-size: 1.5em;
        }
        .legend-item {
            display: inline-block;
            margin: 10px 20px 10px 0;
            padding: 8px 15px;
            background: rgba(255,255,255,0.2);
            border-radius: 8px;
            font-weight: 500;
        }
        .highlight-box {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
            border: 3px solid #f093fb;
        }
        .highlight-box h3 {
            color: #2c3e50;
            margin-top: 0;
        }
        .entity-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .entity-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-size: 1.1em;
        }
        .entity-table td {
            padding: 12px 15px;
            border: 1px solid #e9ecef;
        }
        .entity-table tr:nth-child(even) {
            background: #f8f9fa;
        }
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            margin-right: 5px;
        }
        .badge-conformed { background: #ffa726; color: white; }
        .badge-process { background: #66bb6a; color: white; }
        .badge-analytical { background: #ab47bc; color: white; }
        .badge-fact { background: #42a5f5; color: white; }
        .badge-bridge { background: #26c6da; color: white; }
        .badge-genealogy { background: #ec407a; color: white; }
        .tooltip-info {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            font-size: 0.95em;
        }
        .tooltip-info strong {
            color: #1565c0;
        }
        .self-join-example {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .self-join-example h4 {
            margin-top: 0;
            color: #e65100;
        }
        .code-block {
            background: #263238;
            color: #aed581;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 10px 0;
        }
        .genealogy-section {
            background: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
            border: 3px solid #ec407a;
        }
        .genealogy-section h3 {
            color: #880e4f;
            margin-top: 0;
        }
        .conceptual-note {
            background: linear-gradient(135deg, #e0f2f1 0%, #b2dfdb 100%);
            border-left: 5px solid #00695c;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
    
        .lifecycle-container {
            display: grid;
            gap: 25px;
            margin: 30px 0;
        }
        .lifecycle-stage {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-left: 6px solid #667eea;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .lifecycle-stage h3 {
            color: #2c3e50;
            margin-top: 0;
            font-size: 1.4em;
        }
        .stage-content {
            margin-top: 15px;
            line-height: 1.7;
        }
        .stage-content ul {
            margin: 10px 0;
            padding-left: 25px;
        }
        .stage-content li {
            margin: 8px 0;
        }
        .glossary-section {
            margin: 30px 0;
        }
        .glossary-section h3 {
            color: #34495e;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .glossary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .glossary-item {
            background: #f8f9fa;
            padding: 18px;
            border-radius: 8px;
            border-left: 4px solid #764ba2;
            line-height: 1.6;
        }
        .glossary-item strong {
            color: #2c3e50;
            display: block;
            margin-bottom: 8px;
            font-size: 1.05em;
        }

        .zoom-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            flex-wrap: wrap;
        }
        .zoom-controls button {
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        .zoom-controls button:hover {
            background: #e9ecef;
            border-color: #adb5bd;
        }
        .zoom-controls button:active {
            transform: scale(0.95);
        }
        .zoom-level {
            font-weight: bold;
            color: #495057;
            min-width: 80px;
            text-align: center;
        }
        .mermaid {
            overflow: auto;
            transition: transform 0.3s ease;
            cursor: move;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav>
            <a href="#overview">üìä Overview</a>
            <a href="#conceptual-process">üé® Conceptual Process</a>
            <a href="#conceptual-analytical">üé® Conceptual Analytics</a>
            <a href="#conceptual-integrated">üé® Integrated View</a>
            <a href="#conceptual-process-star">‚≠ê Process-Conceptual</a>
            <a href="#conceptual-analytical-star">‚≠ê Analytical-Conceptual</a>
            <a href="#conceptual-genealogy-star">‚≠ê Genealogy-Conceptual</a>
            <a href="#process-star">‚≠ê Process-Logical</a>
            <a href="#analytical-star">‚≠ê Analytical-Logical</a>
            <a href="#batch-genealogy">üß¨ Batch Genealogy</a>
            <a href="#self-joins">üîÑ Self-Join Examples</a>
            <a href="#entity-catalog">üìã Entity Catalog</a>
            <a href="#complete-erd">üóÇÔ∏è Complete ERD</a>
            <a href="#changes-summary">‚ú® Changes Summary</a>
        </nav>

        <h1>üß¨ Enterprise Data Model for Data Products, BI & Analytics üß¨</h1>
        <div class="subtitle">Discovery ‚Üí Pre-Clinical ‚Üí Phase 1-3 ‚Üí Filing ‚Üí Commercial Manufacturing | Complete Lifecycle Data Architecture</div>
        
        <div class="legend-box">
            <h3>üìä Visual Legend</h3>
            <div class="legend-item">üü¶ FACT = Central Star (Measures & Events)</div>
            <div class="legend-item">üü® CONFORMED = Shared Dimensions</div>
            <div class="legend-item">üü© PROCESS = Manufacturing Domain</div>
            <div class="legend-item">üü™ ANALYTICAL = Testing Domain</div>
            <div class="legend-item">üü• GENEALOGY = Batch Traceability</div>
            <div class="legend-item">‚ö° BRIDGE = Many-to-Many</div>
        </div>

        <!-- OVERVIEW -->
        <h2 id="overview">üìä Architecture Overview</h2>
        <div class="description">
            <strong>Kimball Bus Architecture with GBT Genealogy</strong><br/>
            Two star schemas connected through conformed dimensions with comprehensive batch genealogy tracking.
            <br/><br/>
            <strong>Process Star:</strong> Manufacturing execution, cell culture, bioreactor operations, yields, process parameters<br/>
            <strong>Analytical Star:</strong> Quality control testing, stability studies, method validation, test results<br/>
            <strong>Batch Genealogy:</strong> GBT-style traceability with splits, merges, transformations, and material lineage
        </div>

        <div class="highlight-box">
            <h3>üéØ Key Model Features</h3>
            <ul style="line-height: 1.8;">
                <li><strong>Pure Star Schema:</strong> All dimensions independent (no snowflaking)</li>
                <li><strong>Material Types Include Proteins:</strong> Therapeutic proteins, antibodies, and biologics tracked as material_type in Material</li>
                <li><strong>8 Conformed Dimensions:</strong> Material, Batch, Sample, Manufacturer, Specification, Notification, Document, Source System</li>
                <li><strong>GBT Batch Genealogy:</strong> Complete traceability with batch splits, merges, input/output lots, and transformations</li>
                <li><strong>Self-Join Hierarchies:</strong> Material lineage (Vector‚ÜíCell Line‚ÜíMCB‚ÜíWCB), Batch genealogy, Process decomposition</li>
                <li><strong>Bridge Tables:</strong> Batch-to-batch many-to-many, Material genealogy multi-parent scenarios</li>
            </ul>
        </div>

        
        <!-- PHARMA LIFECYCLE OVERVIEW -->
        <h2 id="pharma-lifecycle">üß¨ Pharmaceutical Product Lifecycle</h2>
        <div class="description">
            <strong>Understanding the Journey from Discovery to Commercial Production</strong><br/>
            This data model supports the complete lifecycle of pharmaceutical and biological products, 
            from initial research through commercial manufacturing. Each stage generates critical data 
            that must be tracked, analyzed, and reported for regulatory compliance and business success.
        </div>

        <div class="lifecycle-container">
            <div class="lifecycle-stage">
                <h3>üî¨ Discovery (Years 0-3)</h3>
                <div class="stage-content">
                    <strong>Objective:</strong> Identify and validate therapeutic targets, develop candidate molecules<br/>
                    <strong>Key Activities:</strong>
                    <ul>
                        <li>Target identification and validation</li>
                        <li>Hit-to-lead optimization</li>
                        <li>Expression vector design and construction</li>
                        <li>Cell line development and screening</li>
                        <li>Initial analytical method development</li>
                    </ul>
                    <strong>Data Model Coverage:</strong>
                    <ul>
                        <li><strong>Material:</strong> Expression vectors, plasmids, cell lines (research grade)</li>
                        <li><strong>Transformation:</strong> Vector ‚Üí Cell Line genealogy tracking</li>
                        <li><strong>Analytical Results:</strong> Screening assays, potency, binding studies</li>
                        <li><strong>Analytical Method:</strong> Early-stage analytical methods (research use only)</li>
                    </ul>
                    <strong>Regulatory Focus:</strong> IP protection, lab notebooks, research data integrity
                </div>
            </div>

            <div class="lifecycle-stage">
                <h3>üêÅ Pre-Clinical (Years 2-4)</h3>
                <div class="stage-content">
                    <strong>Objective:</strong> Demonstrate safety and efficacy in animal models, establish CMC foundation<br/>
                    <strong>Key Activities:</strong>
                    <ul>
                        <li>Toxicology studies (acute, chronic, reproductive)</li>
                        <li>Pharmacokinetics and pharmacodynamics (PK/PD)</li>
                        <li>Master Cell Bank (MCB) generation and characterization</li>
                        <li>Process development and scale-up (bench to pilot)</li>
                        <li>Analytical method qualification</li>
                    </ul>
                    <strong>Data Model Coverage:</strong>
                    <ul>
                        <li><strong>Material:</strong> MCB, Working Cell Banks (WCB), GMP-grade materials</li>
                        <li><strong>Batch:</strong> Pre-clinical batches with full genealogy</li>
                        <li><strong>Manufacturing Process Results:</strong> Process parameters, yields, quality attributes</li>
                        <li><strong>Analytical Results:</strong> Stability studies, potency, purity, safety assays</li>
                        <li><strong>Specification:</strong> Preliminary specifications for CQAs</li>
                    </ul>
                    <strong>Regulatory Focus:</strong> IND submission preparation, GLP compliance, CMC documentation
                </div>
            </div>

            <div class="lifecycle-stage">
                <h3>üë• Phase 1 Clinical (1-2 years)</h3>
                <div class="stage-content">
                    <strong>Objective:</strong> Establish safety in healthy volunteers, determine dosing range<br/>
                    <strong>Key Activities:</strong>
                    <ul>
                        <li>First-in-human trials (20-100 participants)</li>
                        <li>Dose escalation studies</li>
                        <li>Clinical batch manufacturing (small scale)</li>
                        <li>Stability program initiation</li>
                        <li>Method validation (partial)</li>
                    </ul>
                    <strong>Data Model Coverage:</strong>
                    <ul>
                        <li><strong>Batch:</strong> Clinical trial batches with lot tracking</li>
                        <li><strong>Batch Genealogy:</strong> Multi-vial pooling, reformulation tracking</li>
                        <li><strong>Analytical Results:</strong> Release testing, stability, comparability</li>
                        <li><strong>Notification:</strong> Deviation tracking, OOS investigations</li>
                        <li><strong>Document:</strong> Batch records, COAs, stability reports</li>
                    </ul>
                    <strong>Regulatory Focus:</strong> GMP compliance, IND amendments, safety reporting
                </div>
            </div>

            <div class="lifecycle-stage">
                <h3>üè• Phase 2 Clinical (2-3 years)</h3>
                <div class="stage-content">
                    <strong>Objective:</strong> Demonstrate efficacy and safety in patient population<br/>
                    <strong>Key Activities:</strong>
                    <ul>
                        <li>Controlled trials (100-300 patients)</li>
                        <li>Dose-ranging and regimen optimization</li>
                        <li>Tech transfer to clinical manufacturing sites</li>
                        <li>Process characterization and PPQ preparation</li>
                        <li>Analytical method validation (full)</li>
                    </ul>
                    <strong>Data Model Coverage:</strong>
                    <ul>
                        <li><strong>Batch Material Usage:</strong> Bill of materials for process validation</li>
                        <li><strong>Process Operation:</strong> Process steps with CPPs defined</li>
                        <li><strong>Manufacturing Process Results:</strong> In-process controls, PAT data</li>
                        <li><strong>Specification:</strong> Tightened specifications based on clinical data</li>
                        <li><strong>Analytical Results:</strong> Extended characterization, comparability protocols</li>
                    </ul>
                    <strong>Regulatory Focus:</strong> CMC development, quality by design (QbD), risk assessments
                </div>
            </div>

            <div class="lifecycle-stage">
                <h3>üåç Phase 3 Clinical (2-4 years)</h3>
                <div class="stage-content">
                    <strong>Objective:</strong> Confirm efficacy and safety in large patient populations<br/>
                    <strong>Key Activities:</strong>
                    <ul>
                        <li>Large-scale trials (1,000-3,000+ patients)</li>
                        <li>Multi-site, multi-national studies</li>
                        <li>Process Performance Qualification (PPQ)</li>
                        <li>Commercial manufacturing readiness</li>
                        <li>Long-term stability programs</li>
                    </ul>
                    <strong>Data Model Coverage:</strong>
                    <ul>
                        <li><strong>Manufacturer:</strong> Multiple CMOs, fill/finish sites</li>
                        <li><strong>Batch:</strong> PPQ batches, validation batches, conformance lots</li>
                        <li><strong>Manufacturing Process Results:</strong> Validation data, CPP monitoring</li>
                        <li><strong>Analytical Results:</strong> Full release testing suite, trending analysis</li>
                        <li><strong>Source System:</strong> Integration with MES, LIMS, QMS, ERP</li>
                    </ul>
                    <strong>Regulatory Focus:</strong> BLA/MAA preparation, site inspections, validation documentation
                </div>
            </div>

            <div class="lifecycle-stage">
                <h3>üìã Regulatory Filing & Approval (1-2 years)</h3>
                <div class="stage-content">
                    <strong>Objective:</strong> Obtain marketing authorization from health authorities<br/>
                    <strong>Key Activities:</strong>
                    <ul>
                        <li>BLA (Biologics License Application) / NDA submission</li>
                        <li>Pre-approval inspections (PAI)</li>
                        <li>Responses to FDA/EMA questions</li>
                        <li>Commercial manufacturing preparation</li>
                        <li>Post-approval change protocols</li>
                    </ul>
                    <strong>Data Model Coverage:</strong>
                    <ul>
                        <li>Complete integrated model: All manufacturing and analytical data</li>
                        <li><strong>Document:</strong> eCTD modules, validation reports, stability data</li>
                        <li>Historical trending: Batch-to-batch consistency evidence</li>
                        <li>Genealogy tracking: Complete traceability for regulatory queries</li>
                        <li><strong>Analytical Results:</strong> Statistical analysis for specifications justification</li>
                    </ul>
                    <strong>Regulatory Focus:</strong> Data integrity, traceability, change control, CAPA effectiveness
                </div>
            </div>

            <div class="lifecycle-stage">
                <h3>üíº Commercial Production (Ongoing)</h3>
                <div class="stage-content">
                    <strong>Objective:</strong> Manufacture product at scale for market supply<br/>
                    <strong>Key Activities:</strong>
                    <ul>
                        <li>Routine commercial manufacturing</li>
                        <li>Continued process verification (CPV)</li>
                        <li>Annual product reviews (APR)</li>
                        <li>Post-market surveillance and vigilance</li>
                        <li>Lifecycle management and continuous improvement</li>
                    </ul>
                    <strong>Data Model Coverage:</strong>
                    <ul>
                        <li>Full utilization of all star schemas and genealogy</li>
                        <li><strong>Batch:</strong> Commercial lots, batch numbering, distribution tracking</li>
                        <li><strong>Manufacturing Process Results:</strong> CPV trending, real-time release</li>
                        <li><strong>Analytical Results:</strong> Release testing, stability trending, OOS management</li>
                        <li><strong>Notification:</strong> Complaints, recalls, adverse events</li>
                        <li><strong>Batch Genealogy:</strong> Supply chain traceability, recall readiness</li>
                    </ul>
                    <strong>Regulatory Focus:</strong> Continued compliance, annual reports, change management, inspections
                </div>
            </div>
        </div>

        <div class="highlight-box">
            <h3>üéØ How This Data Model Supports the Full Lifecycle</h3>
            <ul style="line-height: 1.8;">
                <li><strong>Unified Data Architecture:</strong> Single source of truth from discovery through commercial</li>
                <li><strong>Regulatory Readiness:</strong> Built-in traceability, audit trails, and 21 CFR Part 11 compliance</li>
                <li><strong>Phase Transitions:</strong> Seamless data migration as products advance through clinical stages</li>
                <li><strong>Risk Management:</strong> Early identification of quality issues through integrated analytics</li>
                <li><strong>Business Intelligence:</strong> KPIs for cycle times, yields, quality metrics across all phases</li>
                <li><strong>Technology Transfer:</strong> Complete process knowledge transfer between R&D and manufacturing</li>
                <li><strong>Comparability:</strong> Historical trending to demonstrate process consistency during changes</li>
            </ul>
        </div>


        <!-- CONCEPTUAL DIAGRAM 1: PROCESS FLOW -->
        <h2 id="conceptual-process">üé® Conceptual Business Process Flow</h2>
        <div class="conceptual-note">
            <strong>üìå Business-Friendly Conceptual Model</strong><br/>
            This diagram shows the high-level manufacturing process flow using business terminology. 
            No technical table names - only domain concepts that SMEs and business users understand.
        </div>

        <div class="tooltip-info">
            <strong>Diagram Purpose:</strong> High-level manufacturing flow from cell banking through purification<br/>
            <strong>Audience:</strong> Business stakeholders, process owners, quality managers<br/>
            <strong>Grain:</strong> Business process steps and their relationships
        </div>
        <div style="text-align: right; margin: 15px 0;">
            <a href="Pharma_Data_Model_Diagram_1_Conceptual_Process_Flow.html" target="_blank" 
               style="display: inline-block; padding: 10px 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                      color: white; text-decoration: none; border-radius: 8px; font-weight: 600; 
                      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); transition: all 0.3s;">
                üîç View/Print Diagram in New Tab
            </a>
        </div>

        <div class="zoom-controls">
            <button onclick="zoomOut1()">Zoom Out (-)</button>
            <span class="zoom-level" id="zoomLevel1">100%</span>
            <button onclick="zoomIn1()">Zoom In (+)</button>
            <button onclick="resetZoom1()">Reset</button>
        </div>
        <div class="diagram-container">
            <div class="mermaid" id="mermaidDiagram1">
graph LR
    %% Conceptual Business Process Flow
    
    CB[Cell Banking<br/>üíâ Vector ‚Üí Cell Line ‚Üí MCB ‚Üí WCB]
    CC[Cell Culture<br/>üß´ Seed Train & Production]
    HARV[Harvest<br/>‚öóÔ∏è Cell Separation]
    PURIF[Purification<br/>üî¨ Chromatography & Filtration]
    FORM[Formulation<br/>üíä Final Drug Product]
    
    MAT[Materials<br/>üì¶ Raw Materials, Reagents, Buffers]
    EQUIP[Equipment<br/>üè≠ Bioreactors, Columns, Filters]
    BATCH[Batch<br/>üè∑Ô∏è Production Lots & Genealogy]
    PROC_PARAMS[Process Parameters<br/>üìä Temp, pH, Flow Rate]
    
    CB --> CC
    CC --> HARV
    HARV --> PURIF
    PURIF --> FORM
    
    MAT -.-> CB
    MAT -.-> CC
    MAT -.-> PURIF
    MAT -.-> FORM
    
    EQUIP -.-> CC
    EQUIP -.-> HARV
    EQUIP -.-> PURIF
    
    BATCH -.-> CB
    BATCH -.-> CC
    BATCH -.-> HARV
    BATCH -.-> PURIF
    BATCH -.-> FORM
    
    PROC_PARAMS -.-> CC
    PROC_PARAMS -.-> PURIF
    
    style CB fill:#e1f5ff
    style CC fill:#fff3e0
    style HARV fill:#e8f5e9
    style PURIF fill:#f3e5f5
    style FORM fill:#fce4ec
    style BATCH fill:#ffebee
    style MAT fill:#f1f8e9
    style EQUIP fill:#e0f2f1
    style PROC_PARAMS fill:#fff9c4
            </div>
        </div>

        <div class="tooltip-info">
            <strong>Cell Banking:</strong> Creation of expression vector, transfection, and banking (MCB/WCB creation)<br/>
            <strong>Cell Culture:</strong> Expansion from vial thaw through production bioreactor<br/>
            <strong>Harvest:</strong> Centrifugation, depth filtration, and cell/product separation<br/>
            <strong>Purification:</strong> Protein A, viral inactivation, polishing chromatography<br/>
            <strong>Formulation:</strong> Buffer exchange, concentration, final fill
        </div>

        <!-- CONCEPTUAL DIAGRAM 2: ANALYTICAL DATA MODEL -->
        <h2 id="conceptual-analytical">üé® Conceptual Analytical Data Model</h2>
        <div class="conceptual-note">
            <strong>üìå Business-Friendly Analytical Concepts</strong><br/>
            Shows the quality control and testing ecosystem using business language.
            Represents analytics relationships, not database schema.
        </div>

        <div class="tooltip-info">
            <strong>Diagram Purpose:</strong> Quality control testing landscape and relationships<br/>
            <strong>Audience:</strong> QC managers, analytical scientists, regulatory affairs<br/>
            <strong>Grain:</strong> Testing concepts and their dependencies
        </div>
        <div style="text-align: right; margin: 15px 0;">
            <a href="Pharma_Data_Model_Diagram_2_Conceptual_Analytical.html" target="_blank" 
               style="display: inline-block; padding: 10px 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                      color: white; text-decoration: none; border-radius: 8px; font-weight: 600; 
                      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); transition: all 0.3s;">
                üîç View/Print Diagram in New Tab
            </a>
        </div>

        <div class="zoom-controls">
            <button onclick="zoomOut2()">Zoom Out (-)</button>
            <span class="zoom-level" id="zoomLevel2">100%</span>
            <button onclick="zoomIn2()">Zoom In (+)</button>
            <button onclick="resetZoom2()">Reset</button>
        </div>
        <div class="diagram-container">
            <div class="mermaid" id="mermaidDiagram2">
graph TB
    %% Conceptual Analytical Data Model
    
    TEST_CAT[Test Categories<br/>üìã Identity, Purity, Potency, Safety]
    MEAS[Measurements<br/>üìä Test Results & Values]
    METHODS[Analytical Methods<br/>üî¨ HPLC, ELISA, PCR, Western Blot]
    
    SPECS[Quality Specifications<br/>‚úÖ Acceptance Criteria & Limits]
    STUDIES[Studies<br/>üìö Stability, Release, Characterization]
    
    CONDITIONS[Storage Conditions<br/>üå°Ô∏è Temperature, Humidity, Light]
    TIMEPOINTS[Study Timepoints<br/>‚è±Ô∏è D0, D4 etc.,  T0, 3mo, 6mo, 12mo, 24mo etc.]
    
    LABS[Testing Laboratories<br/>üè• Internal & Contract Labs]	
	BATCH[Batch<br/>üè∑Ô∏è Lot Number]
    SAMPLE[Samples<br/>üß™ Test Specimens]	
    EVENTS[Quality Events / Notification <br/>‚ö†Ô∏è Deviations, OOS, Investigations]
    DOCS[Documentation<br/>üìÑ COAs, Reports, Protocols]
    
    TEST_CAT --> MEAS
    METHODS --> MEAS
    
    SPECS -.-> MEAS
    STUDIES -.-> MEAS
    
    CONDITIONS -.-> STUDIES
    TIMEPOINTS -.-> STUDIES

	MEAS -.-> LABS
	MEAS -.-> BATCH
    MEAS -.-> SAMPLE  
    MEAS -.-> EVENTS
    MEAS -.-> DOCS
    
    style SAMPLE fill:#e3f2fd
    style MEAS fill:#fff3e0
    style TEST_CAT fill:#f3e5f5
    style METHODS fill:#e8f5e9
    style SPECS fill:#fce4ec
    style LABS fill:#f1f8e9
    style STUDIES fill:#e0f2f1
    style CONDITIONS fill:#fff9c4
    style TIMEPOINTS fill:#ffebee
    style EVENTS fill:#ffccbc
    style DOCS fill:#f0f4c3
            </div>
        </div>

        <div class="tooltip-info">
            <strong>Samples:</strong> Vials, aliquots, retention samples taken from batches<br/>
            <strong>Measurements:</strong> Actual test result values and status (pass/fail/OOS)<br/>
            <strong>Test Categories:</strong> Identity (confirms product), Purity (impurities), Potency (strength), Safety (endotoxin, sterility)<br/>
            <strong>Analytical Methods:</strong> Validated techniques used for testing<br/>
            <strong>Quality Events:</strong> Out-of-specification, deviations, CAPA, investigations
        </div>

        <!-- CONCEPTUAL DIAGRAM 3: INTEGRATED VIEW -->
        <h2 id="conceptual-integrated">üé® Conceptual Integrated Architecture</h2>
        <div class="conceptual-note">
            <strong>üìå Complete Business View: Process + Genealogy + Analytics</strong><br/>
            Enterprise-level conceptual architecture showing how manufacturing, genealogy, and testing interconnect.
            Business terminology only - suitable for executive presentations.
        </div>

        <div class="tooltip-info">
            <strong>Diagram Purpose:</strong> Complete end-to-end traceability and quality system<br/>
            <strong>Audience:</strong> Executive leadership, regulatory inspectors, enterprise architects<br/>
            <strong>Grain:</strong> Major business capabilities and their relationships
        </div>
        <div style="text-align: right; margin: 15px 0;">
            <a href="Pharma_Data_Model_Diagram_3_Conceptual_Integrated.html" target="_blank" 
               style="display: inline-block; padding: 10px 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                      color: white; text-decoration: none; border-radius: 8px; font-weight: 600; 
                      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); transition: all 0.3s;">
                üîç View/Print Diagram in New Tab
            </a>
        </div>

        <div class="zoom-controls">
            <button onclick="zoomOut3()">Zoom Out (-)</button>
            <span class="zoom-level" id="zoomLevel3">100%</span>
            <button onclick="zoomIn3()">Zoom In (+)</button>
            <button onclick="resetZoom3()">Reset</button>
        </div>
        <div class="diagram-container">
            <div class="mermaid" id="mermaidDiagram3">
graph TB
    %% Conceptual Integrated Architecture
    
    subgraph MATERIALS [Material Traceability]
        EV[Expression Vector<br/>üß¨ Plasmid DNA]
        CL[Cell Lines<br/>ü¶† Transfected Cells]
        MCB[Master Cell Bank<br/>üè¶ Primary Stock]
        WCB[Working Cell Bank<br/>üíº Production Stock]
        PROT[Protein<br/>üß¨ Gene of Interest]		
        RM[Raw Materials<br/>üì¶ Media, Buffers, Reagents]
    end
    
    subgraph PROCESS [Process Execution]
        PE[Manufacturing Steps<br/>‚öôÔ∏è Execution Events]
        PP[Process Parameters<br/>üìä Critical Attributes]
        EQ[Equipment Usage<br/>üè≠ Assets & Instruments]
    end
    
    subgraph GENEALOGY [Batch Genealogy & Usage]
        BG[Batch Tracking<br/>üè∑Ô∏è Lot Numbers]
        SPLIT[Batch Splits<br/>üìä 1 ‚Üí Many]
        MERGE[Batch Pooling<br/>üîÄ Many ‚Üí 1]
        TRANS[Transformations<br/>‚öóÔ∏è Process Changes]
        TRACE[Traceability Links<br/>üîó Input/Output Lots]
    end
    
    subgraph QUALITY [Quality Testing]
        SAMP[Sample Collection<br/>üß™ Specimens]
        TESTS[Test Execution<br/>üî¨ QC Testing]
        RESULTS[Test Results<br/>üìà Pass/Fail/OOS]
        INVEST[Investigations<br/>üîç Root Cause]
    end
    
    subgraph GOVERNANCE [Governance & Compliance]
        SPECS[Specifications<br/>üìã Acceptance Criteria]
        DOCS[Documentation<br/>üìÑ Batch Records, COAs]
        EVENTS[Quality Events / Notification <br/>‚ö†Ô∏è Deviations, CAPA]
        SYS[Source Systems<br/>üíæ LIMS, MES, ELN]
    end
    	
    EV --> CL --> MCB --> WCB
    WCB --> PE
	PROT --> EV	
	PROT --> RM	
    RM --> PE
    
    PE --> BG
    BG --> SPLIT
    BG --> MERGE
    BG --> TRANS
    TRANS --> TRACE
    
    BG --> SAMP
    PE --> SAMP
    SAMP --> TESTS
    TESTS --> RESULTS
    RESULTS --> INVEST
    
    SPECS -.-> PE
    SPECS -.-> RESULTS
    
    PE --> DOCS
    RESULTS --> DOCS
    INVEST --> EVENTS
    
    PE -.-> SYS
    TESTS -.-> SYS
    DOCS -.-> SYS
    
    style MATERIALS fill:#e1f5ff
    style PROCESS fill:#fff3e0
    style GENEALOGY fill:#ffebee
    style QUALITY fill:#f3e5f5
    style GOVERNANCE fill:#f1f8e9
            </div>
        </div>

        <div class="tooltip-info">
            <strong>Material Traceability:</strong> Complete lineage from DNA construct to finished drug product<br/>
            <strong>Process Execution:</strong> Manufacturing events with equipment, parameters, and yields<br/>
            <strong>Batch Genealogy:</strong> GBT-style tracking of batch relationships, splits, merges, transformations<br/>
            <strong>Quality Testing:</strong> Sampling, testing, results, and investigations<br/>
            <strong>Governance:</strong> Specifications, documentation, events, and system integration
        </div>

        <!-- GBT BATCH GENEALOGY SECTION -->
        <h2 id="batch-genealogy">üß¨ GBT Batch Genealogy Architecture</h2>
        
        <div class="genealogy-section">
            <h3>üéØ Genealogy Batch Tree (GBT) Overview</h3>
            <p style="line-height: 1.8;">
                <strong>GBT</strong> provides complete forward and backward traceability of batches through:
            </p>
            <ul style="line-height: 2;">
                <li><strong>Batch Relationships:</strong> Parent-child hierarchies (splits, consolidations)</li>
                <li><strong>Material Lots:</strong> Input materials consumed and output lots produced</li>
                <li><strong>Transformation Steps:</strong> Process operations that change material state</li>
                <li><strong>Bill of Materials (BOM):</strong> Recipe/formula linkage</li>
                <li><strong>Production Orders:</strong> Work order associations</li>
                <li><strong>Item-Level Traceability:</strong> Granular tracking to individual containers</li>
            </ul>
        </div>

        <div class="tooltip-info">
            <strong>Use Cases:</strong><br/>
            ‚Ä¢ Product Recall: Find all affected batches downstream<br/>
            ‚Ä¢ Root Cause Investigation: Trace back to source materials<br/>
            ‚Ä¢ Regulatory Audit: Demonstrate complete traceability<br/>
            ‚Ä¢ Quality Impact: Understand scope of material/equipment issues
        </div>
        <div style="text-align: right; margin: 15px 0;">
            <a href="Pharma_Data_Model_Diagram_4_Batch_Genealogy.html" target="_blank" 
               style="display: inline-block; padding: 10px 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                      color: white; text-decoration: none; border-radius: 8px; font-weight: 600; 
                      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); transition: all 0.3s;">
                üîç View/Print Diagram in New Tab
            </a>
        </div>

        <div class="zoom-controls">
            <button onclick="zoomOut4()">Zoom Out (-)</button>
            <span class="zoom-level" id="zoomLevel4">100%</span>
            <button onclick="zoomIn4()">Zoom In (+)</button>
            <button onclick="resetZoom4()">Reset</button>
        </div>
        <div class="diagram-container">
            <div class="mermaid" id="mermaidDiagram4">
erDiagram
    %% GBT Genealogy Model with Tooltips
    
    BATCH["Batch"] {
        bigint batch_identity PK "Surrogate key"
        varchar batch_ID UK "Business batch number"
        varchar batch_status "Released, Quarantine, Rejected"
        bigint parent_batch_identity FK "Self-join for genealogy"
        varchar genealogy_type "Split, Merge, Rework, Original"
        varchar lineage_path "Materialized path for queries"
        int generation_level "0=original, 1=child, 2=grandchild"
        bigint source_material_identity FK "Material used (WCB, MCB)"
        decimal batch_size "Quantity produced"
        varchar batch_size_uom "L, kg, vials"
        date mfg_start_date "Manufacturing start"
        date mfg_end_date "Manufacturing completion"
        varchar production_order "SAP order number"
        boolean current_flag "SCD Type 2"
    }
    
    BATCH_GENEALOGY["Batch Genealogy"] {
        bigint bridge_identity PK "Surrogate key"
        bigint child_batch_identity FK "Resulting batch"
        bigint parent_batch_identity FK "Source batch"
        decimal contribution_percent "% from parent"
        int sequence_order "Order of pooling"
        varchar relationship_type "Input, Output, Rework"
        timestamp created_ts "Audit timestamp"
    }
    
    MATERIAL_LOT["Material Lot"] {
        bigint material_lot_identity PK "Surrogate key"
        varchar lot_number UK "Material lot ID"
        bigint material_identity FK "Material master"
        varchar lot_status "Available, Consumed, Quarantine"
        decimal quantity "Amount available"
        varchar quantity_uom "Unit of measure"
        date manufacturing_date "Lot production date"
        date expiry_date "Expiration date"
        varchar supplier_lot "Vendor lot number"
        boolean current_flag "SCD Type 2"
    }
    
    BATCH_MATERIAL_USAGE["Batch Material Usage"] {
        bigint usage_identity PK "Surrogate key"
        bigint batch_identity FK "Consuming batch"
        bigint material_lot_identity FK "Material lot used"
        bigint transformation_identity FK "Process step"
        varchar usage_type "Input, Output, Yield_Loss"
        decimal quantity_used "Amount consumed/produced"
        varchar quantity_uom "Unit of measure"
        timestamp usage_timestamp "When used"
        varchar bom_item_number "Bill of material line"
    }
    
    TRANSFORMATION["Transformation"] {
        bigint transformation_identity PK "Surrogate key"
        varchar transformation_ID UK "Process step ID"
        varchar transformation_type "Culture, Harvest, Purify, Fill"
        varchar transformation_name "Business process name"
        varchar equipment_ID "Equipment used"
        boolean current_flag "SCD Type 2"
    }
    
    PRODUCTION_ORDER["Production Order"] {
        bigint production_order_identity PK "Surrogate key"
        varchar production_order_ID UK "SAP order number"
        varchar order_type "Production, Rework, Validation"
        varchar product_code "SKU or product ID"
        decimal planned_quantity "Target amount"
        date planned_start "Scheduled start"
        date planned_end "Scheduled completion"
        varchar order_status "Released, Complete, Cancelled"
        boolean current_flag "SCD Type 2"
    }
    
    %% Relationships
    BATCH ||--o| BATCH : "parent batch of"
    BATCH ||--o{ BATCH_GENEALOGY : "child batch in lineage"
    BATCH_GENEALOGY }o--|| BATCH : "parent batch in lineage"

    BATCH ||--o{ BATCH_MATERIAL_USAGE : "utilized in batch"
    MATERIAL_LOT ||--o{ BATCH_MATERIAL_USAGE : "consumed as lot"
    TRANSFORMATION ||--o{ BATCH_MATERIAL_USAGE : "processed by transformation"

    PRODUCTION_ORDER ||--o{ BATCH : "manufactures batch"
            </div>
        </div>

        <div class="tooltip-info">
            <strong>Batch:</strong> Central batch tracking with self-join for parent-child relationships (splits, rework). Grain: One row per batch version.<br/>
            <strong>Batch Genealogy:</strong> Many-to-many batch relationships for pooling/merging scenarios. Grain: One row per parent-child pairing.<br/>
            <strong>Material Lot:</strong> Individual material lots with quantities and status. Grain: One row per material lot version.<br/>
            <strong>Batch Material Usage:</strong> Material consumption and production events. Grain: One row per batch-material-transformation usage event.<br/>
            <strong>Transformation:</strong> Process steps that transform materials. Grain: One row per transformation type version.<br/>
            <strong>Production Order:</strong> Work orders linking batches to production campaigns. Grain: One row per order version.
        </div>

        <!-- SELF-JOIN EXAMPLES -->
        <h2 id="self-joins">üîÑ Self-Join Examples Explained</h2>
        
        <div class="self-join-example">
            <h4>üìä Example 1: Batch Genealogy Self-Join (Splits)</h4>
            <p><strong>Business Scenario:</strong> A 1000L batch is split into three smaller batches for different filling operations.</p>
            
            <div class="code-block">
                Parent Batch: B-2024-001 (1000L) [generation_level = 0]
                    ‚îú‚îÄ‚Üí Child: B-2024-001-A (400L) [generation_level = 1, parent_batch_key ‚Üí B-2024-001]
                    ‚îú‚îÄ‚Üí Child: B-2024-001-B (400L) [generation_level = 1, parent_batch_key ‚Üí B-2024-001]
                    ‚îî‚îÄ‚Üí Child: B-2024-001-C (200L) [generation_level = 1, parent_batch_key ‚Üí B-2024-001]
            </div>
            
            <p><strong>Self-Join Explanation:</strong></p>
            <ul>
                <li>Parent batch B-2024-001 has <code>parent_batch_key = NULL</code> (it's the root)</li>
                <li>Each child batch has <code>parent_batch_key</code> pointing to B-2024-001's <code>batch_key</code></li>
                <li>This creates a tree structure: one parent ‚Üí many children</li>
                <li>Query pattern: <code>JOIN Batch child ON child.parent_batch_key = parent.batch_key</code></li>
            </ul>

            <div class="code-block">
                -- Find all child batches of B-2024-001
                SELECT 
                    parent.batch_id as parent_batch,
                    child.batch_id as child_batch,
                    child.batch_size,
                    child.genealogy_type
                FROM Batch parent
                LEFT JOIN Batch child ON parent.batch_key = child.parent_batch_key
                WHERE parent.batch_id = 'B-2024-001';
                
                Result:
                parent_batch  | child_batch     | batch_size | genealogy_type
                B-2024-001    | B-2024-001-A    | 400L       | Split
                B-2024-001    | B-2024-001-B    | 400L       | Split
                B-2024-001    | B-2024-001-C    | 200L       | Split
            </div>
        </div>

        <div class="self-join-example">
            <h4>üìä Example 2: Material Lineage Self-Join (Vector ‚Üí Cell Line ‚Üí MCB ‚Üí WCB)</h4>
            <p><strong>Business Scenario:</strong> Trace a working cell bank back to its expression vector.</p>
            
            <div class="code-block">
                Expression Vector: pVECTOR-mAb-001 [hierarchy_level = 0, parent_material_key = NULL]
                    ‚Üì
                Cell Line: CHO-K1-mAb-001 [hierarchy_level = 1, parent_material_key ‚Üí pVECTOR-mAb-001]
                    ‚Üì
                MCB: MCB-2024-001 [hierarchy_level = 2, parent_material_key ‚Üí CHO-K1-mAb-001]
                    ‚Üì
                WCB: WCB-2024-Q1-A [hierarchy_level = 3, parent_material_key ‚Üí MCB-2024-001]
            </div>
            
            <p><strong>Self-Join Explanation:</strong></p>
            <ul>
                <li>Each material has a <code>parent_material_key</code> that references another row in Material</li>
                <li>Expression Vector is root (<code>parent_material_key = NULL</code>)</li>
                <li>Cell Line points to Vector, MCB points to Cell Line, WCB points to MCB</li>
                <li>Creates a genealogy chain showing material derivation</li>
            </ul>

            <div class="code-block">
                -- Trace WCB back to Expression Vector
                SELECT 
                    vector.material_id as vector,
                    cell_line.material_id as cell_line,
                    mcb.material_id as mcb,
                    wcb.material_id as wcb
                FROM Material wcb
                LEFT JOIN Material mcb ON wcb.parent_material_key = mcb.material_key
                LEFT JOIN Material cell_line ON mcb.parent_material_key = cell_line.material_key
                LEFT JOIN Material vector ON cell_line.parent_material_key = vector.material_key
                WHERE wcb.material_id = 'WCB-2024-Q1-A';
                
                Result:
                vector              | cell_line        | mcb           | wcb
                pVECTOR-mAb-001     | CHO-K1-mAb-001  | MCB-2024-001  | WCB-2024-Q1-A
            </div>
        </div>

        <div class="self-join-example">
            <h4>üìä Example 3: Process Hierarchy Self-Join (Cell Culture Breakdown)</h4>
            <p><strong>Business Scenario:</strong> A high-level "Cell Culture" process has multiple sub-steps.</p>
            
            <div class="code-block">
                Cell Culture [level = 1, parent_step_key = NULL]
                    ‚îú‚îÄ‚Üí Seed Train [level = 2, parent_step_key ‚Üí Cell Culture]
                    ‚îÇ   ‚îú‚îÄ‚Üí Vial Thaw [level = 3, parent_step_key ‚Üí Seed Train]
                    ‚îÇ   ‚îú‚îÄ‚Üí T-Flask [level = 3, parent_step_key ‚Üí Seed Train]
                    ‚îÇ   ‚îî‚îÄ‚Üí Shake Flask [level = 3, parent_step_key ‚Üí Seed Train]
                    ‚îî‚îÄ‚Üí Production Bioreactor [level = 2, parent_step_key ‚Üí Cell Culture]
            </div>
            
            <p><strong>Self-Join Explanation:</strong></p>
            <ul>
                <li>Top-level process "Cell Culture" is root (<code>parent_step_key = NULL</code>)</li>
                <li>"Seed Train" and "Production Bioreactor" are children of "Cell Culture"</li>
                <li>"Vial Thaw", "T-Flask", "Shake Flask" are children of "Seed Train"</li>
                <li>Enables drill-down from summary to detail, or roll-up from detail to summary</li>
            </ul>
        </div>

        <!-- CONCEPTUAL STAR SCHEMA VERSION 2: Manufacturing Process -->
        <h2 id="conceptual-process-star">üé® Conceptual Model: Manufacturing Process Star Schema</h2>
        <div class="conceptual-note">
            <strong>üìå Conceptual View - Version 2</strong><br/>
            Isolated view of manufacturing process fact with its dimensions.
            Clean star schema showing process hierarchies and conformed dimensions.
        </div>

        <div class="zoom-controls">
            <button onclick="zoomOutConceptProcess()">Zoom Out (-)</button>
            <span class="zoom-level" id="zoomLevelConceptProcess">100%</span>
            <button onclick="zoomInConceptProcess()">Zoom In (+)</button>
            <button onclick="resetZoomConceptProcess()">Reset</button>
        </div>
        <div class="diagram-container">
            <div class="mermaid" id="mermaidDiagramConceptProcess">
erDiagram
    %% MANUFACTURING PROCESS STAR SCHEMA

    %% === FACT ===
    FACT_MANUFACTURING_PROCESS_RESULT["Manufacturing Process Result"]

    %% === CONFORMED DIMENSIONS ===
    BATCH["Batch"]
    SAMPLE["Sample"]
    MATERIAL["Material"]
    MANUFACTURER["Manufacturer"]
    SPECIFICATION["Specification"]
    NOTIFICATION["Notification"]
    DOCUMENT["Document"]
    SOURCE_SYSTEM["Source System"]

    %% === PROCESS-SPECIFIC DIMENSIONS ===
    LOCAL_PROCESS_HIERARCHY["Local Process Hierarchy"]
    COMMON_PROCESS_HIERARCHY["Common Process Hierarchy"]

    %% === DIMENSION HIERARCHIES ===
    LOCAL_PROCESS_HIERARCHY ||--o| LOCAL_PROCESS_HIERARCHY : "parent step of"
    COMMON_PROCESS_HIERARCHY ||--o| COMMON_PROCESS_HIERARCHY : "parent process of"

    %% === STAR SCHEMA RELATIONSHIPS ===
    LOCAL_PROCESS_HIERARCHY ||--o{ FACT_MANUFACTURING_PROCESS_RESULT : "defines local step"
    COMMON_PROCESS_HIERARCHY ||--o{ FACT_MANUFACTURING_PROCESS_RESULT : "defines process"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| BATCH : "performed on"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| SAMPLE : "measured from"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| MATERIAL : "consumed"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| MANUFACTURER : "manufactured by"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| SPECIFICATION : "meets specification"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| NOTIFICATION : "triggers"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| DOCUMENT : "documented in"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| SOURCE_SYSTEM : "sourced from"
            </div>
        </div>

        <!-- CONCEPTUAL STAR SCHEMA VERSION 3: Analytical Results -->
        <h2 id="conceptual-analytical-star">üé® Conceptual Model: Analytical Results Star Schema</h2>
        <div class="conceptual-note">
            <strong>üìå Conceptual View - Version 3</strong><br/>
            Isolated analytical fact with both conformed and analytical-specific dimensions.
            Pure star schema for testing and quality control analytics.
        </div>

        <div class="zoom-controls">
            <button onclick="zoomOutConceptAnalytical()">Zoom Out (-)</button>
            <span class="zoom-level" id="zoomLevelConceptAnalytical">100%</span>
            <button onclick="zoomInConceptAnalytical()">Zoom In (+)</button>
            <button onclick="resetZoomConceptAnalytical()">Reset</button>
        </div>
        <div class="diagram-container">
            <div class="mermaid" id="mermaidDiagramConceptAnalytical">
erDiagram
    %% ANALYTICAL RESULTS STAR SCHEMA

    %% === FACT ===
    FACT_ANALYTICAL["Analytical Result"]

    %% === CONFORMED DIMENSIONS ===
    BATCH["Batch"]
    SAMPLE["Sample"]
    MATERIAL["Material"]
    MANUFACTURER["Manufacturer"]
    SPECIFICATION["Specification"]
    NOTIFICATION["Notification"]
    DOCUMENT["Document"]
    SOURCE_SYSTEM["Source System"]

    %% === ANALYTICAL-SPECIFIC DIMENSIONS ===
    TEST["Test"]
    TEST_LOCATION["Test Location"]
    ANALYTICAL_METHOD["Analytical Method"]
    CONDITION["Condition"]
    TIME_POINT["Time Point"]
    STUDY["Study"]

    %% === STAR SCHEMA RELATIONSHIPS ===
    BATCH ||--o{ FACT_ANALYTICAL : "tested via"
    SAMPLE ||--o{ FACT_ANALYTICAL : "analyzed as"
    MATERIAL ||--o{ FACT_ANALYTICAL : "tested for"
    MANUFACTURER ||--o{ FACT_ANALYTICAL : "produced by"
    SPECIFICATION ||--o{ FACT_ANALYTICAL : "evaluated against"
    NOTIFICATION ||--o{ FACT_ANALYTICAL : "notified via"
    DOCUMENT ||--o{ FACT_ANALYTICAL : "recorded in"
    SOURCE_SYSTEM ||--o{ FACT_ANALYTICAL : "originated in"
    FACT_ANALYTICAL }o--|| ANALYTICAL_METHOD : "using method"
    FACT_ANALYTICAL }o--|| TEST : "performs test"
    FACT_ANALYTICAL }o--|| TEST_LOCATION : "conducted at"
    FACT_ANALYTICAL }o--|| CONDITION : "under condition"
    FACT_ANALYTICAL }o--|| TIME_POINT : "measured at"
    FACT_ANALYTICAL }o--|| STUDY : "part of study"
            </div>
        </div>

        <!-- CONCEPTUAL STAR SCHEMA VERSION 5: Genealogy Complete -->
        <h2 id="conceptual-genealogy-star">üé® Conceptual Model: Genealogy Star Schema (Complete)</h2>
        <div class="conceptual-note">
            <strong>üìå Conceptual View - Version 5</strong><br/>
            Full genealogy fact including Production Order and Transformation dimensions.
            Comprehensive lineage with manufacturing execution context.
        </div>

        <div class="zoom-controls">
            <button onclick="zoomOutConceptGenealogy()">Zoom Out (-)</button>
            <span class="zoom-level" id="zoomLevelConceptGenealogy">100%</span>
            <button onclick="zoomInConceptGenealogy()">Zoom In (+)</button>
            <button onclick="resetZoomConceptGenealogy()">Reset</button>
        </div>
        <div class="diagram-container">
            <div class="mermaid" id="mermaidDiagramConceptGenealogy">
erDiagram
    %% COMPLETE GENEALOGY STAR SCHEMA

    %% === FACT ===
    FACT_BATCH_MATERIAL_USAGE["Batch Material Usage"]

    %% === DIMENSIONS ===
    BATCH["Batch"]
    MATERIAL_LOT["Material Lot"]
    MATERIAL["Material"]
    MANUFACTURER["Manufacturer"]
    DOCUMENT["Document"]
    SOURCE_SYSTEM["Source System"]
    TRANSFORMATION["Transformation"]
    PRODUCTION_ORDER["Production Order"]

    %% === BRIDGE TABLE ===
    BATCH_GENEALOGY["Batch Genealogy"]

    %% === HIERARCHIES ===
    BATCH ||--o| BATCH : "parent of"
    MATERIAL ||--o| MATERIAL : "component of"

    %% === BRIDGE RELATIONSHIPS ===
    BATCH ||--o{ BATCH_GENEALOGY : "is child in"
    BATCH_GENEALOGY }o--|| BATCH : "has parent"

    %% === SUPPORTING RELATIONSHIPS ===
    MATERIAL ||--o{ MATERIAL_LOT : "tracked as"
    PRODUCTION_ORDER ||--o{ BATCH : "produces"

    %% === STAR SCHEMA RELATIONSHIPS ===
    BATCH ||--o{ FACT_BATCH_MATERIAL_USAGE : "consumed in"
    MATERIAL_LOT ||--o{ FACT_BATCH_MATERIAL_USAGE : "used as"
    TRANSFORMATION ||--o{ FACT_BATCH_MATERIAL_USAGE : "transformed via"
    FACT_BATCH_MATERIAL_USAGE }o--|| MATERIAL : "material type"
    FACT_BATCH_MATERIAL_USAGE }o--|| MANUFACTURER : "supplied by"
    FACT_BATCH_MATERIAL_USAGE }o--|| DOCUMENT : "documented in"
    FACT_BATCH_MATERIAL_USAGE }o--|| SOURCE_SYSTEM : "sourced from"
    FACT_BATCH_MATERIAL_USAGE }o--|| PRODUCTION_ORDER : "executed by"
            </div>
        </div>

        <!-- PROCESS STAR SCHEMA -->
        <h2 id="process-star">‚≠ê Process Star Schema Logical - Manufacturing Domain</h2>
        
        <div class="description">
            <strong>Grain:</strong> One row per manufacturing process execution event<br/>
            <strong>Fact Table:</strong> Manufacturing Process Results<br/>
            <strong>Dimensions:</strong> 10 total (8 conformed + 2 process-specific)<br/>
            <strong>Purpose:</strong> Track all manufacturing activities, yields, parameters, and process genealogy
        </div>
        <div style="text-align: right; margin: 15px 0;">
            <a href="Pharma_Data_Model_Diagram_5_Process_Star_Schema.html" target="_blank" 
               style="display: inline-block; padding: 10px 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                      color: white; text-decoration: none; border-radius: 8px; font-weight: 600; 
                      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); transition: all 0.3s;">
                üîç View/Print Diagram in New Tab
            </a>
        </div>

        <div class="zoom-controls">
            <button onclick="zoomOut5()">Zoom Out (-)</button>
            <span class="zoom-level" id="zoomLevel5">100%</span>
            <button onclick="zoomIn5()">Zoom In (+)</button>
            <button onclick="resetZoom5()">Reset</button>
        </div>
        <div class="diagram-container">
            <div class="mermaid" id="mermaidDiagram5">
erDiagram
    %% PROCESS STAR SCHEMA with GBT Genealogy
    
    MANUFACTURING_PROCESS_RESULTS["Manufacturing Process Results"] {
        bigint process_result_identity PK "Surrogate key"
        bigint batch_identity FK "Batch being manufactured"
        bigint sample_identity FK "Sample taken during process"
        bigint source_material_identity FK "Material consumed (WCB, reagent)"
        bigint manufacturer_identity FK "Manufacturing site/CMO"
        bigint local_process_identity FK "Site-specific process step"
        bigint common_process_identity FK "Standard process taxonomy"
        bigint specification_identity FK "Target specs for step"
        bigint notification_identity FK "Deviation/event"
        bigint document_identity FK "Batch record, protocol"
        bigint source_system_identity FK "MES, LIMS, ELN source"
        int cell_passage "Passage number"
        decimal yield_value "Process yield"
        varchar yield_uom "%, g/L, cells/mL"
        decimal temperature_celsius "Process temperature"
        decimal pH_value "pH reading"
        decimal viability_percent "Cell viability"
        decimal density_cells_ml "Cell density"
        timestamp process_timestamp "Event timestamp"
    }
    
    BATCH["Batch"] {
        bigint batch_identity PK "Surrogate key"
        varchar batch_ID UK "Batch number"
        varchar batch_status "Released, Quarantine, Rejected"
        bigint parent_batch_identity FK "Self-join for splits/merges"
        varchar genealogy_type "Original, Split, Merge, Rework"
        varchar lineage_path "Materialized ancestry path"
        int generation_level "Hierarchy depth (0=root)"
        bigint source_material_identity FK "Primary material (WCB)"
        decimal batch_size "Total quantity"
        varchar batch_size_uom "L, kg, vials, doses"
        date mfg_start_date "Production start"
        date mfg_end_date "Production completion"
        varchar production_order "Work order number"
        boolean current_flag "SCD Type 2 flag"
    }
    
    SAMPLE["Sample"] {
        bigint sample_identity PK "Surrogate key"
        varchar sample_ID UK "Sample identifier"
        varchar vial_number "Container/vial ID"
        varchar sample_type "In-Process, Retain, Stability"
        date collection_date "Sample taken date"
        varchar storage_location "Freezer, shelf location"
        boolean current_flag "SCD Type 2 flag"
    }
    
    MATERIAL["Material"] {
        bigint material_identity PK "Surrogate key"
        varchar material_ID UK "Material identifier"
        varchar material_type "Expression Vector, Cell Line, MCB, WCB, Therapeutic Protein, Monoclonal Antibody, Raw Material, Buffer, Media"
        varchar material_name "Descriptive name"
        text protein_sequence "Amino acid sequence for biologics"
        varchar target_antigen "For antibodies"
        varchar protein_subtype "IgG1, IgG2, IgG4, etc"
        decimal molecular_weight_kda "Size in kDa"
        varchar vector_name "For expression vectors"
        int vector_size_bp "Plasmid size"
        varchar promoter "Promoter type"
        varchar species_of_origin "CHO, HEK293, E.coli, etc"
        int passage_number "Cell passage"
        bigint parent_material_identity FK "Self-join for genealogy"
        varchar lineage_path "Material ancestry"
        int hierarchy_level "0=vector, 1=cell line, 2=MCB, 3=WCB"
        boolean current_flag "SCD Type 2 flag"
    }
    
    MANUFACTURER["Manufacturer"] {
        bigint manufacturer_identity PK "Surrogate key"
        varchar manufacturer_ID UK "Manufacturer code"
        varchar manufacturer_name "Company name"
        varchar manufacturer_type "CMO, Internal, Testing Lab"
        varchar facility_location "City, State"
        varchar country "Country code"
        varchar regulatory_status "FDA approved, GMP certified"
        boolean current_flag "SCD Type 2 flag"
    }
    
    LOCAL_PROCESS_HIERARCHY["Local Process Hierarchy"] {
        bigint local_process_identity PK "Surrogate key"
        varchar process_step_ID UK "Process step code"
        varchar process_step_name "Descriptive name"
        varchar process_phase "Upstream, Downstream, Fill"
        varchar equipment_ID "Asset tag"
        varchar location "Building, room"
        bigint parent_step_identity FK "Self-join for hierarchy"
        int hierarchy_level "Process tree depth"
        boolean is_leaf_process "Lowest detail level"
        boolean current_flag "SCD Type 2 flag"
    }
    
    COMMON_PROCESS_HIERARCHY["Common Process Hierarchy"] {
        bigint common_process_identity PK "Surrogate key"
        varchar common_process_ID UK "Standard process code"
        varchar standard_process_name "Industry standard name"
        varchar process_category "Cell Culture, Purification"
        varchar process_subcategory "Chromatography, Filtration"
        bigint parent_process_identity FK "Self-join for taxonomy"
        int hierarchy_level "Taxonomy depth"
        boolean regulatory_critical "GMP critical step"
        boolean current_flag "SCD Type 2 flag"
    }
    
    SPECIFICATION["Specification"] {
        bigint specification_identity PK "Surrogate key"
        varchar specification_ID UK "Spec identifier"
        varchar specification_type "Process, Analytical, Release"
        varchar parameter_name "pH, Temperature, Purity"
        decimal target_value "Optimal value"
        decimal lower_limit "Minimum acceptable"
        decimal upper_limit "Maximum acceptable"
        varchar uom "Unit of measure"
        boolean current_flag "SCD Type 2 flag"
    }
    
    NOTIFICATION["Notification"] {
        bigint notification_identity PK "Surrogate key"
        varchar notification_ID UK "Event number"
        varchar notification_type "Deviation, CAPA, Change Control"
        varchar event_type "Process, Equipment, Material"
        varchar severity_level "Critical, Major, Minor"
        varchar notification_status "Open, Investigating, Closed"
        date notification_date "Event occurrence date"
    }
    
    DOCUMENT["Document"] {
        bigint document_identity PK "Surrogate key"
        varchar document_ID UK "Document number"
        varchar document_type "Batch Record, Protocol, SOP"
        varchar document_name "Title"
        varchar document_url "Storage location"
        text gel_image "Base64 encoded image"
        date upload_date "Document created date"
    }
    
    SOURCE_SYSTEM["Source System"] {
        bigint source_system_identity PK "Surrogate key"
        varchar source_system_ID UK "System code"
        varchar source_system_name "System name"
        varchar system_type "LIMS, MES, ELN, ERP"
        varchar vendor "Software vendor"
        varchar version "System version"
        boolean is_active "Currently in use"
    }
    
    %% Self-Join Hierarchies
    BATCH ||--o| BATCH : "parent batch of"
    MATERIAL ||--o| MATERIAL : "child component of"
    LOCAL_PROCESS_HIERARCHY ||--o| LOCAL_PROCESS_HIERARCHY : "parent operation of"
    COMMON_PROCESS_HIERARCHY ||--o| COMMON_PROCESS_HIERARCHY : "parent procedure of"

    %% Fact Relationships - LEFT: Process-Specific
    LOCAL_PROCESS_HIERARCHY ||--o{ MANUFACTURING_PROCESS_RESULTS : "defines unit operation"
    COMMON_PROCESS_HIERARCHY ||--o{ MANUFACTURING_PROCESS_RESULTS : "defines procedure"

    %% Fact Relationships - RIGHT: Conformed
    MANUFACTURING_PROCESS_RESULTS }o--|| BATCH : "executed for"
    MANUFACTURING_PROCESS_RESULTS }o--|| SAMPLE : "sampled from"
    MANUFACTURING_PROCESS_RESULTS }o--|| MATERIAL : "consumed material"
    MANUFACTURING_PROCESS_RESULTS }o--|| MANUFACTURER : "executed by manufacturer"
    MANUFACTURING_PROCESS_RESULTS }o--|| SPECIFICATION : "evaluated against"
    MANUFACTURING_PROCESS_RESULTS }o--|| NOTIFICATION : "generated notification"
    MANUFACTURING_PROCESS_RESULTS }o--|| DOCUMENT : "recorded in"
    MANUFACTURING_PROCESS_RESULTS }o--|| SOURCE_SYSTEM : "originated in"

    %% Supporting Relationships
    MATERIAL ||--o{ BATCH : "input to batch"
            </div>
        </div>

        <div class="tooltip-info">
            <strong>Manufacturing Process Results:</strong> Manufacturing events with yields and parameters. Grain: One row per process execution event.<br/>
            <strong>Batch:</strong> Production batches with GBT genealogy (self-join for splits/merges). Grain: One row per batch version.<br/>
            <strong>Material:</strong> Materials including proteins as material_type (Expression Vector‚ÜíCell Line‚ÜíMCB‚ÜíWCB‚ÜíTherapeutic Protein). Self-join for lineage. Grain: One row per material version.<br/>
            <strong>Local Process Hierarchy:</strong> Site-specific process steps with self-join. Grain: One row per local process step version.<br/>
            <strong>Common Process Hierarchy:</strong> Standard industry process taxonomy with self-join. Grain: One row per standard process version.
        </div>

        <!-- ANALYTICAL STAR SCHEMA -->
        <h2 id="analytical-star">‚≠ê Analytical Star Schema Logical - Analytical Domain</h2>
        
        <div class="description">
            <strong>Grain:</strong> One row per analytical test result<br/>
            <strong>Fact Table:</strong> Analytical Results<br/>
            <strong>Dimensions:</strong> 14 total (8 conformed + 6 analytical-specific)<br/>
            <strong>Purpose:</strong> Track all quality control testing, stability studies, and analytical results
        </div>
        <div style="text-align: right; margin: 15px 0;">
            <a href="Pharma_Data_Model_Diagram_6_Analytical_Star_Schema.html" target="_blank" 
               style="display: inline-block; padding: 10px 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                      color: white; text-decoration: none; border-radius: 8px; font-weight: 600; 
                      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); transition: all 0.3s;">
                üîç View/Print Diagram in New Tab
            </a>
        </div>

        <div class="zoom-controls">
            <button onclick="zoomOut6()">Zoom Out (-)</button>
            <span class="zoom-level" id="zoomLevel6">100%</span>
            <button onclick="zoomIn6()">Zoom In (+)</button>
            <button onclick="resetZoom6()">Reset</button>
        </div>
        <div class="diagram-container">
            <div class="mermaid" id="mermaidDiagram6">
erDiagram
    %% ANALYTICAL STAR SCHEMA with GBT Genealogy
    
    ANALYTICAL_RESULTS["Analytical Results"] {
        bigint test_result_identity PK "Surrogate key"
        bigint batch_identity FK "Batch being tested"
        bigint sample_identity FK "Sample analyzed"
        bigint source_material_identity FK "Material tested"
        bigint manufacturer_identity FK "Testing lab/site"
        bigint test_identity FK "Test performed"
        bigint test_location_identity FK "Laboratory"
        bigint analytical_method_identity FK "Method used"
        bigint condition_identity FK "Storage condition"
        bigint timepoint_identity FK "Stability timepoint"
        bigint specification_identity FK "Acceptance criteria"
        bigint study_identity FK "Study protocol"
        bigint notification_identity FK "OOS event"
        bigint document_identity FK "COA, report"
        bigint source_system_identity FK "LIMS source"
        decimal test_result "Numeric result"
        varchar test_uom "Unit of measure"
        int cell_passage "Passage number"
        timestamp test_timestamp "Test performed timestamp"
        varchar result_status "Pass, Fail, OOS, Pending"
        boolean oos_flag "Out of specification"
        decimal percent_difference "% vs target"
    }
    
    BATCH["Batch"] {
        bigint batch_identity PK "Surrogate key"
        varchar batch_ID UK "Batch number"
        varchar batch_status "Released, Quarantine, Rejected"
        bigint parent_batch_identity FK "Self-join for splits/merges"
        varchar genealogy_type "Original, Split, Merge, Rework"
        varchar lineage_path "Materialized ancestry path"
        int generation_level "Hierarchy depth (0=root)"
        bigint source_material_identity FK "Primary material (WCB)"
        decimal batch_size "Total quantity"
        varchar batch_size_uom "L, kg, vials, doses"
        date mfg_start_date "Production start"
        date mfg_end_date "Production completion"
        varchar production_order "Work order number"
        boolean current_flag "SCD Type 2 flag"
    }
    
    SAMPLE["Sample"] {
        bigint sample_identity PK "Surrogate key"
        varchar sample_ID UK "Sample identifier"
        varchar vial_number "Container/vial ID"
        varchar sample_type "In-Process, Retain, Stability"
        date collection_date "Sample taken date"
        varchar storage_location "Freezer, shelf location"
        boolean current_flag "SCD Type 2 flag"
    }
    
    MATERIAL["Material"] {
        bigint material_identity PK "Surrogate key"
        varchar material_ID UK "Material identifier"
        varchar material_type "Expression Vector, Cell Line, MCB, WCB, Therapeutic Protein, Monoclonal Antibody, Raw Material, Buffer, Media"
        varchar material_name "Descriptive name"
        text protein_sequence "Amino acid sequence for biologics"
        varchar target_antigen "For antibodies"
        varchar protein_subtype "IgG1, IgG2, IgG4, etc"
        decimal molecular_weight_kda "Size in kDa"
        varchar vector_name "For expression vectors"
        int vector_size_bp "Plasmid size"
        varchar promoter "Promoter type"
        varchar species_of_origin "CHO, HEK293, E.coli, etc"
        int passage_number "Cell passage"
        bigint parent_material_identity FK "Self-join for genealogy"
        varchar lineage_path "Material ancestry"
        int hierarchy_level "0=vector, 1=cell line, 2=MCB, 3=WCB"
        boolean current_flag "SCD Type 2 flag"
    }
    
    MANUFACTURER["Manufacturer"] {
        bigint manufacturer_identity PK "Surrogate key"
        varchar manufacturer_ID UK "Manufacturer code"
        varchar manufacturer_name "Company name"
        varchar manufacturer_type "CMO, Internal, Testing Lab"
        varchar facility_location "City, State"
        varchar country "Country code"
        varchar regulatory_status "FDA approved, GMP certified"
        boolean current_flag "SCD Type 2 flag"
    }
    
    SPECIFICATION["Specification"] {
        bigint specification_identity PK "Surrogate key"
        varchar specification_ID UK "Spec identifier"
        varchar specification_type "Process, Analytical, Release"
        varchar parameter_name "pH, Temperature, Purity"
        decimal target_value "Optimal value"
        decimal lower_limit "Minimum acceptable"
        decimal upper_limit "Maximum acceptable"
        varchar uom "Unit of measure"
        boolean current_flag "SCD Type 2 flag"
    }
    
    NOTIFICATION["Notification"] {
        bigint notification_identity PK "Surrogate key"
        varchar notification_ID UK "Event number"
        varchar notification_type "Deviation, CAPA, Change Control"
        varchar event_type "Process, Equipment, Material"
        varchar severity_level "Critical, Major, Minor"
        varchar notification_status "Open, Investigating, Closed"
        date notification_date "Event occurrence date"
    }
    
    DOCUMENT["Document"] {
        bigint document_identity PK "Surrogate key"
        varchar document_ID UK "Document number"
        varchar document_type "Batch Record, Protocol, SOP, COA"
        varchar document_name "Title"
        varchar document_url "Storage location"
        text gel_image "Base64 encoded image"
        date upload_date "Document created date"
    }
    
    SOURCE_SYSTEM["Source System"] {
        bigint source_system_identity PK "Surrogate key"
        varchar source_system_ID UK "System code"
        varchar source_system_name "System name"
        varchar system_type "LIMS, MES, ELN, ERP"
        varchar vendor "Software vendor"
        varchar version "System version"
        boolean is_active "Currently in use"
    }
    
    TEST["Test"] {
        bigint test_identity PK "Surrogate key"
        varchar test_ID UK "Test code"
        varchar test_name "Test description"
        varchar test_category "Identity, Purity, Potency, Safety"
        varchar test_method_category "Chromatography, Immunoassay"
        varchar test_component "Heavy Chain, Light Chain, Aggregate"
        boolean current_flag "SCD Type 2 flag"
    }
    
    TEST_LOCATION["Test Location"] {
        bigint test_location_identity PK "Surrogate key"
        varchar location_ID UK "Lab code"
        varchar laboratory_name "Lab name"
        varchar facility "Building/site"
        varchar country "Country code"
        varchar clia_number "CLIA certification"
        boolean current_flag "SCD Type 2 flag"
    }
    
    ANALYTICAL_METHOD["Analytical Method"] {
        bigint analytical_method_identity PK "Surrogate key"
        varchar method_ID UK "Method number"
        varchar method_name "Method title"
        varchar method_type "Compendial, In-house"
        varchar technique "HPLC, ELISA, qPCR, Western"
        varchar instrument_type "Equipment category"
        date validation_date "Method validated date"
        boolean current_flag "SCD Type 2 flag"
    }
    
    CONDITION["Condition"] {
        bigint condition_identity PK "Surrogate key"
        varchar condition_ID UK "Condition code"
        varchar storage_condition "Long-term, Accelerated, Stressed"
        decimal temperature_celsius "Storage temp"
        decimal relative_humidity "RH %"
        varchar light_exposure "Dark, Ambient, Direct"
        boolean current_flag "SCD Type 2 flag"
    }
    
    TIMEPOINT["Timepoint"] {
        bigint timepoint_identity PK "Surrogate key"
        varchar timepoint_ID UK "Timepoint code"
        decimal timepoint_value "Numeric value"
        varchar timepoint_uom "months, weeks, days"
        varchar timepoint_label "T0, 3mo, 6mo, 12mo, 24mo"
        boolean current_flag "SCD Type 2 flag"
    }
    
    STUDY["Study"] {
        bigint study_identity PK "Surrogate key"
        varchar study_ID UK "Study number"
        varchar study_name "Study title"
        varchar study_type "Stability, Release, Characterization"
        varchar study_phase "Phase 1, Phase 2, Phase 3"
        date study_start_date "Study start"
        date study_end_date "Study completion"
        boolean current_flag "SCD Type 2 flag"
    }
    
    %% Self-Join Hierarchies
    BATCH ||--o| BATCH : "parent batch of"
    MATERIAL ||--o| MATERIAL : "child component of"

    %% Fact Relationships - LEFT: Conformed
    BATCH ||--o{ ANALYTICAL_RESULTS : "analyzed by"
    SAMPLE ||--o{ ANALYTICAL_RESULTS : "subjected to analysis"
    MATERIAL ||--o{ ANALYTICAL_RESULTS : "material tested"
    MANUFACTURER ||--o{ ANALYTICAL_RESULTS : "produced by"
    SPECIFICATION ||--o{ ANALYTICAL_RESULTS : "compared to specification"
    NOTIFICATION ||--o{ ANALYTICAL_RESULTS : "notified via"
    DOCUMENT ||--o{ ANALYTICAL_RESULTS : "recorded in"
    SOURCE_SYSTEM ||--o{ ANALYTICAL_RESULTS : "originated in"

    %% Fact Relationships - RIGHT: Analytical-Specific
    ANALYTICAL_RESULTS }o--|| TEST : "executes test method"
    ANALYTICAL_RESULTS }o--|| TEST_LOCATION : "performed at location"
    ANALYTICAL_RESULTS }o--|| ANALYTICAL_METHOD : "performed by method"
    ANALYTICAL_RESULTS }o--|| CONDITION : "tested under conditions"
    ANALYTICAL_RESULTS }o--|| TIMEPOINT : "collected at timepoint"
    ANALYTICAL_RESULTS }o--|| STUDY : "conducted in study"

    %% Supporting Relationships
    MATERIAL ||--o{ BATCH : "input to batch"
            </div>
        </div>

        <div class="tooltip-info">
            <strong>Analytical Results:</strong> Test results and QC data. Grain: One row per test execution.<br/>
            <strong>Test:</strong> Catalog of analytical tests (Identity, Purity, Potency, Safety). Grain: One row per test version.<br/>
            <strong>Test Location:</strong> Testing laboratories and facilities. Grain: One row per lab version.<br/>
            <strong>Analytical Method:</strong> Validated analytical methods (HPLC, ELISA, etc). Grain: One row per method version.<br/>
            <strong>Condition:</strong> Storage conditions for stability testing. Grain: One row per condition version.<br/>
            <strong>Timepoint:</strong> Study timepoints (T0, 3mo, 6mo, etc). Grain: One row per timepoint version.<br/>
            <strong>Study:</strong> Clinical and stability study protocols. Grain: One row per study version.
        </div>

        <!-- COMPLETE ERD -->
        <h2 id="complete-erd">üóÇÔ∏è Complete Integrated ERD - Both Stars with Genealogy</h2>
        
        <div class="description">
            <strong>Complete Enterprise View:</strong> Both manufacturing and analytical stars connected through 8 conformed dimensions, with GBT genealogy and material lineage.
            <br/><br/>
            <strong>Total Entities:</strong> 2 Facts + 16 Dimensions + 2 Bridges = 20 Entities<br/>
            <strong>Conformed Dimensions:</strong> 8 (Material, Batch, Sample, Manufacturer, Specification, Notification, Document, Source System)<br/>
            <strong>Self-Join Hierarchies:</strong> 4 (Material, Batch, Local Process, Common Process)<br/>
            <strong>Genealogy Support:</strong> GBT with batch splits, merges, material lots, transformations
        </div>
        <div style="text-align: right; margin: 15px 0;">
            <a href="Pharma_Data_Model_Diagram_7_Complete_Conceptual_ERD.html" target="_blank" 
               style="display: inline-block; padding: 10px 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                      color: white; text-decoration: none; border-radius: 8px; font-weight: 600; 
                      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); transition: all 0.3s;">
                üìã View/Print Conceptual ERD Diagram(with all entities) in New Tab
            </a>
        </div>

        <div class="zoom-controls">
            <button onclick="zoomOut7()">Zoom Out (-)</button>
            <span class="zoom-level" id="zoomLevel7">100%</span>
            <button onclick="zoomIn7()">Zoom In (+)</button>
            <button onclick="resetZoom7()">Reset</button>
        </div>
        <div class="diagram-container">
            <div class="mermaid" id="mermaidDiagram7">
erDiagram
    %% ENTERPRISE DATA MODEL - Process + Analytical + Genealogy
    
    %% === FACTS ===
    FACT_MANUFACTURING_PROCESS_RESULT["Manufacturing Process Result"]
    FACT_ANALYTICAL["Analytical Result"]
    FACT_BATCH_MATERIAL_USAGE["Batch Material Usage"]
    
    %% === CONFORMED DIMENSIONS ===
    BATCH["Batch"]
    SAMPLE["Sample"]
    MATERIAL["Material"]
    MANUFACTURER["Manufacturer"]
    SPECIFICATION["Specification"]
    NOTIFICATION["Notification"]
    DOCUMENT["Document"]
    SOURCE_SYSTEM["Source System"]
    
    %% === PROCESS-SPECIFIC DIMENSIONS ===
    LOCAL_PROCESS_HIERARCHY["Local Process Hierarchy"]
    COMMON_PROCESS_HIERARCHY["Common Process Hierarchy"]
    
    %% === ANALYTICAL-SPECIFIC DIMENSIONS ===
    TEST["Test"]
    TEST_LOCATION["Test Location"]
    ANALYTICAL_METHOD["Analytical Method"]
    CONDITION["Condition"]
    TIME_POINT["Time Point"]
    STUDY["Study"]
    
    %% === GENEALOGY DIMENSIONS ===
    MATERIAL_LOT["Material Lot"]
    TRANSFORMATION["Transformation"]
    PRODUCTION_ORDER["Production Order"]
    
    %% === BRIDGE TABLES ===
    BATCH_GENEALOGY["Batch Genealogy"]
    
    %% === SELF-JOIN HIERARCHIES ===
    BATCH ||--o| BATCH : "parent of"
    MATERIAL ||--o| MATERIAL : "component of"
    LOCAL_PROCESS_HIERARCHY ||--o| LOCAL_PROCESS_HIERARCHY : "parent step of"
    COMMON_PROCESS_HIERARCHY ||--o| COMMON_PROCESS_HIERARCHY : "parent process of"
    
    %% === BRIDGE RELATIONSHIPS ===
    BATCH ||--o{ BATCH_GENEALOGY : "is child in"
    BATCH_GENEALOGY }o--|| BATCH : "has parent"
    
    %% === SUPPORTING RELATIONSHIPS ===
    MATERIAL ||--o{ BATCH : "used to produce"
    MATERIAL ||--o{ MATERIAL_LOT : "tracked as"
    PRODUCTION_ORDER ||--o{ BATCH : "produces"
    
    %% === PROCESS FACT RELATIONSHIPS ===
    LOCAL_PROCESS_HIERARCHY ||--o{ FACT_MANUFACTURING_PROCESS_RESULT : "defines local step for"
    COMMON_PROCESS_HIERARCHY ||--o{ FACT_MANUFACTURING_PROCESS_RESULT : "defines process for"
    
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| BATCH : "performed on"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| SAMPLE : "measured from"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| MATERIAL : "consumed"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| MANUFACTURER : "manufactured by"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| SPECIFICATION : "meets specification"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| NOTIFICATION : "triggers"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| DOCUMENT : "documented in"
    FACT_MANUFACTURING_PROCESS_RESULT }o--|| SOURCE_SYSTEM : "sourced from"
    
    %% === ANALYTICAL FACT RELATIONSHIPS ===
    BATCH ||--o{ FACT_ANALYTICAL : "tested via"
    SAMPLE ||--o{ FACT_ANALYTICAL : "analyzed as"
    MATERIAL ||--o{ FACT_ANALYTICAL : "tested for"
    MANUFACTURER ||--o{ FACT_ANALYTICAL : "produced by"
    SPECIFICATION ||--o{ FACT_ANALYTICAL : "evaluated against"
    NOTIFICATION ||--o{ FACT_ANALYTICAL : "notified via"
    DOCUMENT ||--o{ FACT_ANALYTICAL : "recorded in"
    SOURCE_SYSTEM ||--o{ FACT_ANALYTICAL : "originated in"
    
    FACT_ANALYTICAL }o--|| ANALYTICAL_METHOD : "using method"
    FACT_ANALYTICAL }o--|| TEST : "performs test"
    FACT_ANALYTICAL }o--|| TEST_LOCATION : "conducted at"
    FACT_ANALYTICAL }o--|| CONDITION : "under condition"
    FACT_ANALYTICAL }o--|| TIME_POINT : "measured at"
    FACT_ANALYTICAL }o--|| STUDY : "part of study"
    
    %% === GENEALOGY FACT RELATIONSHIPS ===
    BATCH ||--o{ FACT_BATCH_MATERIAL_USAGE : "consumed in"
    MATERIAL_LOT ||--o{ FACT_BATCH_MATERIAL_USAGE : "used as"
    TRANSFORMATION ||--o{ FACT_BATCH_MATERIAL_USAGE : "transformed via"
            </div>
        </div>
        
        
        <div style="text-align: right; margin: 15px 0;">
            <a href="Pharma_Data_Model_Diagram_8_Complete_Logical_ERD.html" target="_blank" 
               style="display: inline-block; padding: 10px 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                      color: white; text-decoration: none; border-radius: 8px; font-weight: 600; 
                      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); transition: all 0.3s;">
                üìã View/Print logical ERD (with all attributes) in New Tab
            </a>
        </div>

        <div class="zoom-controls">
            <button onclick="zoomOut8()">Zoom Out (-)</button>
            <span class="zoom-level" id="zoomLevel8">100%</span>
            <button onclick="zoomIn8()">Zoom In (+)</button>
            <button onclick="resetZoom8()">Reset</button>
        </div>
        <div class="diagram-container">
            <div class="mermaid" id="mermaidDiagram8">
erDiagram
    %% COMPLETE INTEGRATED ERD - Process + Analytical + Genealogy
    
    %% === FACTS ===
    MANUFACTURING_PROCESS_RESULTS["Manufacturing Process Results"] {
        bigint process_result_identity PK
        bigint batch_identity FK
        bigint sample_identity FK
        bigint source_material_identity FK
        bigint manufacturer_identity FK
        bigint local_process_identity FK
        bigint common_process_identity FK
        bigint specification_identity FK
        bigint notification_identity FK
        bigint document_identity FK
        bigint source_system_identity FK
        decimal yield_value
        decimal temperature_celsius
        decimal pH_value
        decimal viability_percent
        timestamp process_timestamp
    }
    
    ANALYTICAL_RESULTS["Analytical Results"] {
        bigint test_result_identity PK
        bigint batch_identity FK
        bigint sample_identity FK
        bigint source_material_identity FK
        bigint manufacturer_identity FK
        bigint test_identity FK
        bigint test_location_identity FK
        bigint analytical_method_identity FK
        bigint condition_identity FK
        bigint timepoint_identity FK
        bigint specification_identity FK
        bigint study_identity FK
        bigint notification_identity FK
        bigint document_identity FK
        bigint source_system_identity FK
        decimal test_result
        varchar result_status
        boolean oos_flag
        timestamp test_timestamp
    }
    
    BATCH_MATERIAL_USAGE["Batch Material Usage"] {
        bigint usage_identity PK
        bigint batch_identity FK
        bigint material_lot_identity FK
        bigint transformation_identity FK
        varchar usage_type
        decimal quantity_used
        timestamp usage_timestamp
    }
    
    %% === CONFORMED DIMENSIONS ===
    BATCH["Batch"] {
        bigint batch_identity PK
        varchar batch_ID UK
        varchar batch_status
        bigint parent_batch_identity FK
        varchar genealogy_type
        varchar lineage_path
        int generation_level
        bigint source_material_identity FK
        decimal batch_size
        date mfg_start_date
        varchar production_order
        boolean current_flag
    }
    
    SAMPLE["Sample"] {
        bigint sample_identity PK
        varchar sample_ID UK
        varchar vial_number
        varchar sample_type
        date collection_date
        varchar storage_location
        boolean current_flag
    }
    
    MATERIAL["Material"] {
        bigint material_identity PK
        varchar material_ID UK
        varchar material_type
        varchar material_name
        text protein_sequence
        varchar target_antigen
        varchar protein_subtype
        bigint parent_material_identity FK
        varchar lineage_path
        int hierarchy_level
        boolean current_flag
    }
    
    MANUFACTURER["Manufacturer"] {
        bigint manufacturer_identity PK
        varchar manufacturer_ID UK
        varchar manufacturer_name
        varchar manufacturer_type
        varchar facility_location
        varchar country
        boolean current_flag
    }
    
    SPECIFICATION["Specification"] {
        bigint specification_identity PK
        varchar specification_ID UK
        varchar specification_type
        varchar parameter_name
        decimal target_value
        decimal lower_limit
        decimal upper_limit
        varchar uom
        boolean current_flag
    }
    
    NOTIFICATION["Notification"] {
        bigint notification_identity PK
        varchar notification_ID UK
        varchar notification_type
        varchar event_type
        varchar severity_level
        date notification_date
    }
    
    DOCUMENT["Document"] {
        bigint document_identity PK
        varchar document_ID UK
        varchar document_type
        varchar document_name
        varchar document_url
        date upload_date
    }
    
    SOURCE_SYSTEM["Source System"] {
        bigint source_system_identity PK
        varchar source_system_ID UK
        varchar source_system_name
        varchar system_type
        varchar vendor
        boolean is_active
    }
    
    %% === PROCESS-SPECIFIC DIMENSIONS ===
    LOCAL_PROCESS_HIERARCHY["Local Process Hierarchy"] {
        bigint local_process_identity PK
        varchar process_step_ID UK
        varchar process_step_name
        bigint parent_step_identity FK
        int hierarchy_level
        boolean current_flag
    }
    
    COMMON_PROCESS_HIERARCHY["Common Process Hierarchy"] {
        bigint common_process_identity PK
        varchar common_process_ID UK
        varchar standard_process_name
        bigint parent_process_identity FK
        int hierarchy_level
        boolean current_flag
    }
    
    %% === ANALYTICAL-SPECIFIC DIMENSIONS ===
    TEST["Test"] {
        bigint test_identity PK
        varchar test_ID UK
        varchar test_name
        varchar test_category
        boolean current_flag
    }
    
    TEST_LOCATION["Test Location"] {
        bigint test_location_identity PK
        varchar location_ID UK
        varchar laboratory_name
        boolean current_flag
    }
    
    ANALYTICAL_METHOD["Analytical Method"] {
        bigint analytical_method_identity PK
        varchar method_ID UK
        varchar method_name
        varchar technique
        boolean current_flag
    }
    
    CONDITION["Condition"] {
        bigint condition_identity PK
        varchar condition_ID UK
        varchar storage_condition
        decimal temperature_celsius
        boolean current_flag
    }
    
    TIMEPOINT["Timepoint"] {
        bigint timepoint_identity PK
        varchar timepoint_ID UK
        decimal timepoint_value
        varchar timepoint_label
        boolean current_flag
    }
    
    STUDY["Study"] {
        bigint study_identity PK
        varchar study_ID UK
        varchar study_name
        varchar study_type
        boolean current_flag
    }
    
    %% === GENEALOGY DIMENSIONS ===
    MATERIAL_LOT["Material Lot"] {
        bigint material_lot_identity PK
        varchar lot_number UK
        bigint material_identity FK
        varchar lot_status
        decimal quantity
        date expiry_date
        boolean current_flag
    }
    
    TRANSFORMATION["Transformation"] {
        bigint transformation_identity PK
        varchar transformation_ID UK
        varchar transformation_type
        varchar transformation_name
        boolean current_flag
    }
    
    PRODUCTION_ORDER["Production Order"] {
        bigint production_order_identity PK
        varchar production_order_ID UK
        varchar order_type
        varchar order_status
        boolean current_flag
    }
    
    %% === BRIDGE TABLES ===
    BATCH_GENEALOGY["Batch Genealogy"] {
        bigint bridge_identity PK
        bigint child_batch_identity FK
        bigint parent_batch_identity FK
        decimal contribution_percent
        int sequence_order
    }
    
    %% === SELF-JOIN HIERARCHIES ===
    BATCH ||--o| BATCH : "sourced from"
    MATERIAL ||--o| MATERIAL : "parent_material"
    LOCAL_PROCESS_HIERARCHY ||--o| LOCAL_PROCESS_HIERARCHY : "parent step"
    COMMON_PROCESS_HIERARCHY ||--o| COMMON_PROCESS_HIERARCHY : "parent process"
    
    %% === BRIDGE RELATIONSHIPS ===
    BATCH ||--o{ BATCH_GENEALOGY : "produces"
    BATCH_GENEALOGY }o--|| BATCH : "sourced from"
    
    %% === SUPPORTING RELATIONSHIPS ===
    MATERIAL ||--o{ BATCH : "source_material"
    MATERIAL ||--o{ MATERIAL_LOT : "material"
    PRODUCTION_ORDER ||--o{ BATCH : "production_order"
    
    %% === PROCESS FACT RELATIONSHIPS ===
    LOCAL_PROCESS_HIERARCHY ||--o{ MANUFACTURING_PROCESS_RESULTS : "local process"
    COMMON_PROCESS_HIERARCHY ||--o{ MANUFACTURING_PROCESS_RESULTS : "common process"
    
    MANUFACTURING_PROCESS_RESULTS }o--|| BATCH : "batch"
    MANUFACTURING_PROCESS_RESULTS }o--|| SAMPLE : "sample"
    MANUFACTURING_PROCESS_RESULTS }o--|| MATERIAL : "source material"
    MANUFACTURING_PROCESS_RESULTS }o--|| MANUFACTURER : "manufacturer"
    MANUFACTURING_PROCESS_RESULTS }o--|| SPECIFICATION : "specification"
    MANUFACTURING_PROCESS_RESULTS }o--|| NOTIFICATION : "notification"
    MANUFACTURING_PROCESS_RESULTS }o--|| DOCUMENT : "document"
    MANUFACTURING_PROCESS_RESULTS }o--|| SOURCE_SYSTEM : "source system"
    
    %% === ANALYTICAL FACT RELATIONSHIPS ===
    BATCH ||--o{ ANALYTICAL_RESULTS : "batch"
    SAMPLE ||--o{ ANALYTICAL_RESULTS : "sample"
    MATERIAL ||--o{ ANALYTICAL_RESULTS : "source_material"
    MANUFACTURER ||--o{ ANALYTICAL_RESULTS : "manufacturer"
    SPECIFICATION ||--o{ ANALYTICAL_RESULTS : "specification"
    NOTIFICATION ||--o{ ANALYTICAL_RESULTS : "notification"
    DOCUMENT ||--o{ ANALYTICAL_RESULTS : "document"
    SOURCE_SYSTEM ||--o{ ANALYTICAL_RESULTS : "source system"
    
    ANALYTICAL_RESULTS }o--|| TEST : "test"
    ANALYTICAL_RESULTS }o--|| TEST_LOCATION : "test_location"
    ANALYTICAL_RESULTS }o--|| ANALYTICAL_METHOD : "analytical method"
    ANALYTICAL_RESULTS }o--|| CONDITION : "condition"
    ANALYTICAL_RESULTS }o--|| TIMEPOINT : "timepoint"
    ANALYTICAL_RESULTS }o--|| STUDY : "study"
    
    %% === GENEALOGY FACT RELATIONSHIPS ===
    BATCH ||--o{ BATCH_MATERIAL_USAGE : "batch"
    MATERIAL_LOT ||--o{ BATCH_MATERIAL_USAGE : "material lot"
    TRANSFORMATION ||--o{ BATCH_MATERIAL_USAGE : "transformation"
            </div>
        </div>

        <!-- ENTITY CATALOG -->
        
        <h2 id="conceptual-complete">üé® Conceptual Model - High-Level Entity Relationships</h2>
        <div class="conceptual-note">
            <strong>üìå Business-Friendly Conceptual View</strong><br/>
            High-level view of the complete integrated data model showing core business entities and their relationships.
            Derived from the Complete Integrated ERD using business terminology.
        </div>

        <div class="tooltip-info">
            <strong>Diagram Purpose:</strong> Executive-level view of the complete data architecture<br/>
            <strong>Audience:</strong> Business executives, data governance teams, enterprise architects<br/>
            <strong>Scope:</strong> Both manufacturing (Process) and quality (Analytical) domains with genealogy
        </div>

        <div style="text-align: right; margin: 15px 0;">
            <a href="Pharma_Data_Model_Diagram_9_Conceptual_Model.html" target="_blank" 
               style="display: inline-block; padding: 10px 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                      color: white; text-decoration: none; border-radius: 8px; font-weight: 600; 
                      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); transition: all 0.3s;">
                üîç View/Print Diagram in New Tab
            </a>
        </div>

        <div class="zoom-controls">
            <button onclick="zoomOut9()">Zoom Out (-)</button>
            <span class="zoom-level" id="zoomLevel9">100%</span>
            <button onclick="zoomIn9()">Zoom In (+)</button>
            <button onclick="resetZoom9()">Reset</button>
        </div>
        <div class="diagram-container">
            <div class="mermaid" id="mermaidDiagram9">
graph TB
    %% Core Manufacturing Entities
    subgraph Manufacturing["üè≠ Manufacturing Process Domain"]
        ProdOrder[Production Order<br/>üìã Manufacturing Execution]
        Batch[Batch<br/>üè∑Ô∏è Production Lots]
        Material[Material<br/>üì¶ Raw Materials & Products]
        Equipment[Equipment<br/>üè≠ Bioreactors & Assets]
        ProcessOp[Process Operation<br/>‚öôÔ∏è Manufacturing Steps]
        ProcessParams[Process Parameters<br/>üìä Temp, pH, Pressure]
    end
    
    %% Core Analytical Entities
    subgraph Analytical["üî¨ Quality & Testing Domain"]
        Sample[Sample<br/>üß™ Test Specimens]
        Test[Test<br/>üîç Quality Tests]
        TestResult[Test Result<br/>üìà Measurements]
        Specification[Specification<br/>üìè Quality Standards]
        Method[Test Method<br/>üî¨ Analytical Procedures]
    end
    
    %% Batch Genealogy
    subgraph Genealogy["üß¨ Batch Genealogy & Traceability"]
        BatchGenealogy[Batch Genealogy<br/>üîÑ Parent-Child Tracking]
        MaterialLot[Material Lot<br/>üì¶ Supplier Lots]
        Transformation[Material Transformation<br/>üîÑ Vector‚ÜíCell Line‚ÜíMCB‚ÜíWCB]
        BatchMaterial[Batch Material Usage<br/>üìù Bill of Materials]
    end
    
    %% Shared/Conformed Entities
    subgraph Conformed["üåê Shared Reference Data"]
        Mfg[Manufacturer<br/>üè¢ Suppliers & Partners]
        Document[Document<br/>üìÑ SOPs, Protocols, Reports]
        Notification[Notification<br/>üö® Deviations & Events]
        Source[Source System<br/>üíæ ERP, LIMS, MES]
    end
    
    %% Time Dimension
    Time[Time<br/>üìÖ Date Hierarchy]
    
    %% Relationships - Manufacturing
    ProdOrder --> Batch
    ProdOrder --> ProcessOp
    Batch --> Material
    Batch --> Equipment
    ProcessOp --> Equipment
    ProcessOp --> ProcessParams
    Batch --> Time
    
    %% Relationships - Analytical
    Sample --> Batch
    Sample --> Material
    Test --> Sample
    Test --> Method
    TestResult --> Test
    TestResult --> Specification
    TestResult --> Time
    
    %% Relationships - Genealogy
    Batch --> BatchGenealogy
    BatchGenealogy --> Batch
    Material --> MaterialLot
    Material --> Transformation
    Transformation --> Material
    Batch --> BatchMaterial
    BatchMaterial --> Material
    BatchMaterial --> MaterialLot
    
    %% Relationships - Conformed
    Material --> Mfg
    Batch --> Mfg
    Sample --> Mfg
    ProdOrder --> Document
    Test --> Document
    Batch --> Notification
    TestResult --> Notification
    ProdOrder --> Source
    Test --> Source
    
    %% Styling
    classDef processClass fill:#c8e6c9,stroke:#388e3c,stroke-width:3px
    classDef analyticalClass fill:#e1bee7,stroke:#7b1fa2,stroke-width:3px
    classDef genealogyClass fill:#ffcdd2,stroke:#c62828,stroke-width:3px
    classDef conformedClass fill:#fff9c4,stroke:#f57f17,stroke-width:3px
    classDef timeClass fill:#b3e5fc,stroke:#0277bd,stroke-width:3px
    
    class ProdOrder,Batch,Material,Equipment,ProcessOp,ProcessParams processClass
    class Sample,Test,TestResult,Specification,Method analyticalClass
    class BatchGenealogy,MaterialLot,Transformation,BatchMaterial genealogyClass
    class Mfg,Document,Notification,Source conformedClass
    class Time timeClass
            </div>
        </div>

        <div class="tooltip-info">
            <strong>üè≠ Manufacturing Domain:</strong> Production orders drive batch creation, process operations use equipment and track parameters<br/>
            <strong>üî¨ Analytical Domain:</strong> Samples from batches undergo tests using methods, results measured against specifications<br/>
            <strong>üß¨ Genealogy:</strong> Batch parent-child relationships, material transformations (Vector‚ÜíMCB‚ÜíWCB), lot tracking<br/>
            <strong>üåê Conformed:</strong> Manufacturers, documents, notifications, and source systems shared across both domains<br/>
            <strong>üìÖ Time:</strong> Common time dimension enables temporal analysis across all business processes
        </div>

        <h2 id="entity-catalog">üìã Complete Entity Catalog</h2>
        
        <div class="description">
            Comprehensive catalog of all entities with classifications, grain definitions, and usage notes.
        </div>

        <table class="entity-table">
            <thead>
                <tr>
                    <th>Entity Name</th>
                    <th>Type</th>
                    <th>Grain</th>
                    <th>Self-Join</th>
                    <th>Key Purpose</th>
                </tr>
            </thead>
            <tbody>
                <!-- FACTS -->
                <tr style="background: #e3f2fd;">
                    <td><strong>Manufacturing Process Results</strong></td>
                    <td><span class="badge badge-fact">FACT</span></td>
                    <td>One row per process execution event</td>
                    <td>‚ùå No</td>
                    <td>Captures manufacturing activities, yields, parameters</td>
                </tr>
                <tr style="background: #f3e5f5;">
                    <td><strong>Analytical Results</strong></td>
                    <td><span class="badge badge-fact">FACT</span></td>
                    <td>One row per test result</td>
                    <td>‚ùå No</td>
                    <td>Captures quality control test results and status</td>
                </tr>
                <tr style="background: #ffebee;">
                    <td><strong>Batch Material Usage</strong></td>
                    <td><span class="badge badge-fact">FACT</span> <span class="badge badge-genealogy">GENEALOGY</span></td>
                    <td>One row per batch-material usage event</td>
                    <td>‚ùå No</td>
                    <td>Tracks material consumption and production by batch</td>
                </tr>
                
                <!-- CONFORMED -->
                <tr>
                    <td><strong>Material</strong></td>
                    <td><span class="badge badge-conformed">CONFORMED</span></td>
                    <td>One row per material version</td>
                    <td>‚úÖ Yes (lineage)</td>
                    <td>Expression vectors, cell lines, MCB/WCB, therapeutic proteins (as material_type), raw materials. Self-join: Vector‚ÜíCell Line‚ÜíMCB‚ÜíWCB</td>
                </tr>
                <tr>
                    <td><strong>Batch</strong></td>
                    <td><span class="badge badge-conformed">CONFORMED</span> <span class="badge badge-genealogy">GENEALOGY</span></td>
                    <td>One row per batch version</td>
                    <td>‚úÖ Yes (genealogy)</td>
                    <td>Production batches with GBT genealogy. Self-join: Parent‚ÜíChild batches (splits, merges, rework)</td>
                </tr>
                <tr>
                    <td><strong>Sample</strong></td>
                    <td><span class="badge badge-conformed">CONFORMED</span></td>
                    <td>One row per sample version</td>
                    <td>‚ùå No</td>
                    <td>Test specimens and retention samples</td>
                </tr>
                <tr>
                    <td><strong>Manufacturer</strong></td>
                    <td><span class="badge badge-conformed">CONFORMED</span></td>
                    <td>One row per manufacturer version</td>
                    <td>‚ùå No</td>
                    <td>Manufacturing sites, CMOs, testing laboratories</td>
                </tr>
                <tr>
                    <td><strong>Specification</strong></td>
                    <td><span class="badge badge-conformed">CONFORMED</span></td>
                    <td>One row per specification version</td>
                    <td>‚ùå No</td>
                    <td>Process and analytical acceptance criteria</td>
                </tr>
                <tr>
                    <td><strong>Notification</strong></td>
                    <td><span class="badge badge-conformed">CONFORMED</span></td>
                    <td>One row per event</td>
                    <td>‚ùå No</td>
                    <td>Deviations, CAPA, quality events across domains</td>
                </tr>
                <tr>
                    <td><strong>Document</strong></td>
                    <td><span class="badge badge-conformed">CONFORMED</span></td>
                    <td>One row per document</td>
                    <td>‚ùå No</td>
                    <td>Batch records, protocols, COAs, SOPs, images</td>
                </tr>
                <tr>
                    <td><strong>Source System</strong></td>
                    <td><span class="badge badge-conformed">CONFORMED</span></td>
                    <td>One row per system</td>
                    <td>‚ùå No</td>
                    <td>Data lineage (LIMS, MES, ELN, ERP)</td>
                </tr>
                
                <!-- PROCESS ONLY -->
                <tr style="background: #e8f5e9;">
                    <td><strong>Local Process Hierarchy</strong></td>
                    <td><span class="badge badge-process">PROCESS</span></td>
                    <td>One row per local process step version</td>
                    <td>‚úÖ Yes (hierarchy)</td>
                    <td>Site-specific process decomposition. Self-join: Phase‚ÜíStep‚ÜíSub-step</td>
                </tr>
                <tr style="background: #e8f5e9;">
                    <td><strong>Common Process Hierarchy</strong></td>
                    <td><span class="badge badge-process">PROCESS</span></td>
                    <td>One row per standard process version</td>
                    <td>‚úÖ Yes (taxonomy)</td>
                    <td>Industry standard process taxonomy. Self-join: Category‚ÜíPhase‚ÜíStep</td>
                </tr>
                
                <!-- ANALYTICAL ONLY -->
                <tr style="background: #f3e5f5;">
                    <td><strong>Test</strong></td>
                    <td><span class="badge badge-analytical">ANALYTICAL</span></td>
                    <td>One row per test version</td>
                    <td>‚ùå No</td>
                    <td>Test catalog (Identity, Purity, Potency, Safety)</td>
                </tr>
                <tr style="background: #f3e5f5;">
                    <td><strong>Test Location</strong></td>
                    <td><span class="badge badge-analytical">ANALYTICAL</span></td>
                    <td>One row per laboratory version</td>
                    <td>‚ùå No</td>
                    <td>Testing laboratories and facilities</td>
                </tr>
                <tr style="background: #f3e5f5;">
                    <td><strong>Analytical Method</strong></td>
                    <td><span class="badge badge-analytical">ANALYTICAL</span></td>
                    <td>One row per method version</td>
                    <td>‚ùå No</td>
                    <td>Validated analytical methods (HPLC, ELISA, PCR, etc)</td>
                </tr>
                <tr style="background: #f3e5f5;">
                    <td><strong>Condition</strong></td>
                    <td><span class="badge badge-analytical">ANALYTICAL</span></td>
                    <td>One row per condition version</td>
                    <td>‚ùå No</td>
                    <td>Storage conditions for stability testing</td>
                </tr>
                <tr style="background: #f3e5f5;">
                    <td><strong>Timepoint</strong></td>
                    <td><span class="badge badge-analytical">ANALYTICAL</span></td>
                    <td>One row per timepoint version</td>
                    <td>‚ùå No</td>
                    <td>Stability study timepoints (T0, 3mo, 6mo, etc)</td>
                </tr>
                <tr style="background: #f3e5f5;">
                    <td><strong>Study</strong></td>
                    <td><span class="badge badge-analytical">ANALYTICAL</span></td>
                    <td>One row per study version</td>
                    <td>‚ùå No</td>
                    <td>Clinical and stability study protocols</td>
                </tr>
                
                <!-- GENEALOGY -->
                <tr style="background: #ffebee;">
                    <td><strong>Material Lot</strong></td>
                    <td><span class="badge badge-genealogy">GENEALOGY</span></td>
                    <td>One row per material lot version</td>
                    <td>‚ùå No</td>
                    <td>Individual material lots with quantities and expiry</td>
                </tr>
                <tr style="background: #ffebee;">
                    <td><strong>Transformation</strong></td>
                    <td><span class="badge badge-genealogy">GENEALOGY</span></td>
                    <td>One row per transformation version</td>
                    <td>‚ùå No</td>
                    <td>Process operations that transform materials</td>
                </tr>
                <tr style="background: #ffebee;">
                    <td><strong>Production Order</strong></td>
                    <td><span class="badge badge-genealogy">GENEALOGY</span></td>
                    <td>One row per order version</td>
                    <td>‚ùå No</td>
                    <td>Work orders linking batches to campaigns</td>
                </tr>
                
                <!-- BRIDGES -->
                <tr style="background: #e0f7fa;">
                    <td><strong>Batch Genealogy</strong></td>
                    <td><span class="badge badge-bridge">BRIDGE</span></td>
                    <td>One row per parent-child batch pairing</td>
                    <td>‚ùå No</td>
                    <td>Many-to-many batch relationships (merges, pooling)</td>
                </tr>
            </tbody>
        </table>

        <div class="highlight-box">
            <h3>üéØ Model Summary</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                <div>
                    <h4 style="color: #1976d2;">Facts (3)</h4>
                    <ul>
                        <li>Manufacturing Process Result</li>
                        <li>Analytical Test Result</li>
                        <li>Batch Material Usage</li>
                    </ul>
                </div>
                <div>
                    <h4 style="color: #f57c00;">Conformed (8)</h4>
                    <ul>
                        <li>Material (with protein types)</li>
                        <li>Batch (with genealogy)</li>
                        <li>Sample</li>
                        <li>Manufacturer</li>
                        <li>Specification</li>
                        <li>Notification</li>
                        <li>Document</li>
                        <li>Source System</li>
                    </ul>
                </div>
                <div>
                    <h4 style="color: #388e3c;">Self-Joins (4)</h4>
                    <ul>
                        <li>Material Lineage</li>
                        <li>Batch Genealogy</li>
                        <li>Local Process Hierarchy</li>
                        <li>Common Process Taxonomy</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- CHANGES SUMMARY -->
        
        <!-- FEATURES AND CAPABILITIES -->
        <h2 id="features">‚ú® Model Features & Capabilities</h2>
        
        <div class="highlight-box">
            <h3>üèóÔ∏è Architecture Features</h3>
            <ul style="line-height: 1.8;">
                <li><strong>Kimball Bus Architecture:</strong> Two star schemas with 8 conformed dimensions</li>
                <li><strong>Pure Star Schema Design:</strong> No snowflaking - optimized for query performance</li>
                <li><strong>GBT Batch Genealogy:</strong> Industry-standard traceability patterns</li>
                <li><strong>Self-Join Hierarchies:</strong> Material lineage, batch genealogy, process decomposition</li>
                <li><strong>Bridge Tables:</strong> Handle complex many-to-many relationships</li>
                <li><strong>Slowly Changing Dimensions:</strong> Type 1 and Type 2 support for historical tracking</li>
                <li><strong>Surrogate Keys:</strong> All tables use surrogate keys for integration flexibility</li>
            </ul>
        </div>

        <div class="highlight-box">
            <h3>üî¨ Manufacturing Domain Capabilities</h3>
            <ul style="line-height: 1.8;">
                <li><strong>Cell Line Development:</strong> Expression vector ‚Üí Cell line ‚Üí MCB ‚Üí WCB genealogy</li>
                <li><strong>Process Operations:</strong> Track all manufacturing steps with parameters and yields</li>
                <li><strong>Equipment Integration:</strong> Bioreactor runs, chromatography columns, filtration units</li>
                <li><strong>In-Process Controls:</strong> Real-time parameter monitoring (pH, temp, density, viability)</li>
                <li><strong>Material Consumption:</strong> Bill of materials with lot-level traceability</li>
                <li><strong>Batch Splits & Merges:</strong> Handle pooling, reformulation, rework scenarios</li>
                <li><strong>Production Orders:</strong> Link batches to campaigns and production schedules</li>
                <li><strong>Deviations & Events:</strong> Capture and track manufacturing notifications</li>
            </ul>
        </div>

        <div class="highlight-box">
            <h3>üß™ Analytical Domain Capabilities</h3>
            <ul style="line-height: 1.8;">
                <li><strong>Quality Control Testing:</strong> Release, stability, characterization, comparability</li>
                <li><strong>Sample Management:</strong> Sample registration, chain of custody, storage tracking</li>
                <li><strong>Test Methods:</strong> Method validation status, USP references, technique classification</li>
                <li><strong>Specifications:</strong> CQA targets, acceptance criteria, phase-specific ranges</li>
                <li><strong>Multi-Analyte Support:</strong> Potency, purity, safety, identity, physicochemical</li>
                <li><strong>Stability Programs:</strong> ICH conditions, timepoints, trending analysis</li>
                <li><strong>OOS/OOT Handling:</strong> Out-of-spec investigation and trending alerts</li>
                <li><strong>CoA Generation:</strong> Automated certificate of analysis from test results</li>
            </ul>
        </div>

        <div class="highlight-box">
            <h3>üìä Business Intelligence & Analytics</h3>
            <ul style="line-height: 1.8;">
                <li><strong>KPI Dashboards:</strong> Cycle times, first-pass yield, OOS rates, equipment utilization</li>
                <li><strong>Trend Analysis:</strong> Process capability (Cpk), control charts, batch-to-batch consistency</li>
                <li><strong>Root Cause Analysis:</strong> Correlate process parameters with quality attributes</li>
                <li><strong>Predictive Analytics:</strong> ML models for yield prediction, quality forecasting</li>
                <li><strong>Resource Planning:</strong> Equipment scheduling, material forecasting, capacity planning</li>
                <li><strong>Compliance Reporting:</strong> Annual product reviews, validation reports, trending studies</li>
                <li><strong>Supply Chain Analytics:</strong> Batch traceability, recall simulation, supplier performance</li>
                <li><strong>Financial Analysis:</strong> Cost per batch, material costs, deviation impact assessment</li>
            </ul>
        </div>

        <div class="highlight-box">
            <h3>‚úÖ Regulatory & Compliance Support</h3>
            <ul style="line-height: 1.8;">
                <li><strong>21 CFR Part 11:</strong> Audit trail, electronic signatures, data integrity controls</li>
                <li><strong>EU Annex 11:</strong> Computerized system validation requirements</li>
                <li><strong>ICH Guidelines:</strong> Q7 (API), Q9 (Quality Risk), Q10 (Pharmaceutical Quality System)</li>
                <li><strong>GMP Compliance:</strong> Batch record completeness, deviation management, CAPA tracking</li>
                <li><strong>Traceability:</strong> Forward and backward genealogy for recall readiness</li>
                <li><strong>Data Integrity:</strong> ALCOA+ principles (Attributable, Legible, Contemporaneous, Original, Accurate)</li>
                <li><strong>Validation Support:</strong> IQ/OQ/PQ documentation, validation protocols, test scripts</li>
                <li><strong>Inspection Readiness:</strong> Quick retrieval of manufacturing and quality history</li>
            </ul>
        </div>

        <!-- RECOMMENDATIONS -->
        <h2 id="recommendations">üí° Implementation Recommendations</h2>

        <div class="highlight-box">
            <h3>üöÄ Getting Started</h3>
            <ul style="line-height: 1.8;">
                <li><strong>Phase 1 - Foundation (2-3 months):</strong>
                    <ul>
                        <li>Deploy core dimensions: Material, Batch, Sample, Manufacturer</li>
                        <li>Implement Process Star schema for one manufacturing area</li>
                        <li>Establish data governance and naming conventions</li>
                        <li>Set up initial ETL pipelines from MES/LIMS</li>
                    </ul>
                </li>
                <li><strong>Phase 2 - Expansion (3-4 months):</strong>
                    <ul>
                        <li>Add Analytical Star schema with full test result tracking</li>
                        <li>Implement batch genealogy with self-joins and bridge tables</li>
                        <li>Expand to all manufacturing areas and process operations</li>
                        <li>Build initial BI dashboards and reports</li>
                    </ul>
                </li>
                <li><strong>Phase 3 - Optimization (2-3 months):</strong>
                    <ul>
                        <li>Add material transformation tracking (Vector ‚Üí MCB ‚Üí WCB)</li>
                        <li>Implement advanced analytics (trending, statistical analysis)</li>
                        <li>Integration with upstream systems (ERP, QMS, Document Management)</li>
                        <li>Automated report generation and alerting</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="highlight-box">
            <h3>üõ†Ô∏è Technology Stack Recommendations</h3>
            <ul style="line-height: 1.8;">
                <li><strong>Cloud Platform:</strong> AWS (Redshift, S3, Glue) or Azure (Synapse, Data Lake, Data Factory)</li>
                <li><strong>Data Lake:</strong> Databricks Delta Lake for ACID transactions and time travel</li>
                <li><strong>Query Engine:</strong> Trino for federated queries across multiple data sources</li>
                <li><strong>ETL/ELT:</strong> Apache Airflow, dbt (data build tool), Databricks workflows</li>
                <li><strong>BI Tools:</strong> Tableau, Power BI, or Looker for dashboards</li>
                <li><strong>Data Catalog:</strong> AWS Glue Catalog, Azure Purview, or Databricks Unity Catalog</li>
                <li><strong>Version Control:</strong> Git for SQL scripts, data lineage tracking</li>
                <li><strong>CI/CD:</strong> Automated testing and deployment for data pipelines</li>
            </ul>
        </div>

        <div class="highlight-box">
            <h3>üìã Data Governance Best Practices</h3>
            <ul style="line-height: 1.8;">
                <li><strong>Naming Conventions:</strong> Consistent table/column naming (e.g., entity_attribute_modifier)</li>
                <li><strong>Data Quality:</strong> Implement DQ checks at source, transformation, and consumption layers</li>
                <li><strong>Master Data:</strong> Centralized master data management for materials, equipment, specifications</li>
                <li><strong>Metadata Management:</strong> Business glossary, data dictionaries, lineage tracking</li>
                <li><strong>Access Control:</strong> Role-based access, row-level security for sensitive data</li>
                <li><strong>Data Retention:</strong> Align with regulatory requirements (typically 5-10 years for GxP data)</li>
                <li><strong>Audit Logging:</strong> Track all data changes, who/when/what/why</li>
                <li><strong>Data Stewardship:</strong> Assign data owners for each domain area</li>
            </ul>
        </div>

        <div class="highlight-box">
            <h3>üéì Training & Adoption</h3>
            <ul style="line-height: 1.8;">
                <li><strong>Business Users:</strong> Focus on BI tools, report interpretation, data literacy</li>
                <li><strong>Power Users:</strong> SQL training, dimensional modeling concepts, self-service analytics</li>
                <li><strong>Data Engineers:</strong> ETL patterns, data quality, performance optimization</li>
                <li><strong>Data Scientists:</strong> Feature engineering from star schema, ML model integration</li>
                <li><strong>QA/Compliance:</strong> Data integrity requirements, audit trail usage, traceability queries</li>
            </ul>
        </div>

        <div class="highlight-box">
            <h3>üìà Success Metrics & KPIs</h3>
            <ul style="line-height: 1.8;">
                <li><strong>Data Quality:</strong> >99% completeness, <1% error rate in critical fields</li>
                <li><strong>Performance:</strong> Query response time <5 seconds for 95% of queries</li>
                <li><strong>Adoption:</strong> 80% of manufacturing/QC staff using BI dashboards monthly</li>
                <li><strong>Business Value:</strong> Reduce cycle time by 15%, increase first-pass yield by 10%</li>
                <li><strong>Compliance:</strong> Zero data integrity findings in inspections</li>
                <li><strong>Time to Insight:</strong> Reduce ad-hoc analysis time from days to hours</li>
            </ul>
        </div>

        <div class="highlight-box">
            <h3>‚ö†Ô∏è Common Pitfalls to Avoid</h3>
            <ul style="line-height: 1.8;">
                <li><strong>Snowflaking Dimensions:</strong> Keep star schema pure - don't normalize dimensions</li>
                <li><strong>Too Many Dimensions:</strong> Start with core dimensions, add incrementally based on use cases</li>
                <li><strong>Ignoring Data Quality:</strong> Garbage in = garbage out. Invest in source data quality</li>
                <li><strong>Over-Engineering:</strong> Build for current needs + 20%, not every possible future scenario</li>
                <li><strong>Lack of Documentation:</strong> Document business rules, transformation logic, data lineage</li>
                <li><strong>Poor Change Management:</strong> Schema changes require careful versioning and communication</li>
                <li><strong>Neglecting Performance:</strong> Partition large tables, create appropriate indexes, use caching</li>
                <li><strong>Inadequate Testing:</strong> Test ETL pipelines, data quality rules, BI reports before production</li>
            </ul>
        </div>

        <div class="highlight-box">
            <h3>üîÆ Future Enhancements</h3>
            <ul style="line-height: 1.8;">
                <li><strong>Real-Time Streaming:</strong> Add real-time process parameter monitoring with Apache Kafka</li>
                <li><strong>Advanced Analytics:</strong> Predictive maintenance, anomaly detection, quality prediction</li>
                <li><strong>Digital Twin:</strong> Virtual representation of manufacturing processes for simulation</li>
                <li><strong>AI/ML Integration:</strong> Automated root cause analysis, optimal parameter recommendations</li>
                <li><strong>IoT Integration:</strong> Direct sensor data ingestion from equipment</li>
                <li><strong>Blockchain:</strong> Immutable audit trail for critical GMP records</li>
                <li><strong>Graph Database:</strong> Enhanced genealogy and material relationship queries</li>
                <li><strong>Natural Language:</strong> Ask questions in plain English, get SQL-powered answers</li>
            </ul>
        </div>


        
        <!-- BUSINESS GLOSSARY -->
        <h2 id="business-glossary">üìö Pharmaceutical Business Glossary</h2>
        
        <div class="glossary-section">
            <h3>üî¨ Manufacturing Terms</h3>
            <div class="glossary-grid">
                <div class="glossary-item">
                    <strong>MCB (Master Cell Bank):</strong> Original vials of characterized cells stored under controlled conditions, used as source for WCB production. Typically lasts 10-20 years of commercial manufacturing.
                </div>
                <div class="glossary-item">
                    <strong>WCB (Working Cell Bank):</strong> Cells expanded from MCB, used for routine production. When WCB is depleted, new WCB is generated from MCB.
                </div>
                <div class="glossary-item">
                    <strong>Expression Vector:</strong> Engineered DNA plasmid containing the gene encoding the therapeutic protein. Transfected into host cells to create production cell line.
                </div>
                <div class="glossary-item">
                    <strong>Seed Train:</strong> Sequential expansion of cells from vial thaw through progressively larger vessels (T-flask ‚Üí shake flask ‚Üí seed bioreactor) to reach target cell density.
                </div>
                <div class="glossary-item">
                    <strong>Production Bioreactor:</strong> Final vessel where cells produce the therapeutic protein. Typical sizes: 2,000L - 20,000L for commercial manufacturing.
                </div>
                <div class="glossary-item">
                    <strong>Harvest:</strong> Separation of cells from culture medium containing the secreted therapeutic protein. Typically uses centrifugation and depth filtration.
                </div>
                <div class="glossary-item">
                    <strong>Purification:</strong> Multi-step chromatography process to isolate and purify the protein. Common steps: Protein A, viral inactivation, ion exchange, size exclusion.
                </div>
                <div class="glossary-item">
                    <strong>Formulation:</strong> Buffer exchange, concentration adjustment, addition of excipients to create stable final drug product ready for fill/finish.
                </div>
            </div>
        </div>

        <div class="glossary-section">
            <h3>üß™ Quality & Testing Terms</h3>
            <div class="glossary-grid">
                <div class="glossary-item">
                    <strong>CQA (Critical Quality Attribute):</strong> Physical, chemical, biological, or microbiological property that must be within appropriate limits to ensure product quality (e.g., potency, purity, aggregates).
                </div>
                <div class="glossary-item">
                    <strong>CPP (Critical Process Parameter):</strong> Process parameter that must be controlled to ensure CQAs are met (e.g., pH, temperature, feed rate).
                </div>
                <div class="glossary-item">
                    <strong>Release Testing:</strong> Testing performed before batch release to market. Must meet all specifications in approved filing.
                </div>
                <div class="glossary-item">
                    <strong>Stability Testing:</strong> Long-term studies to establish shelf life and storage conditions. ICH guidelines specify timepoints and conditions.
                </div>
                <div class="glossary-item">
                    <strong>Comparability:</strong> Demonstration that product quality attributes are similar before and after manufacturing changes. Required for regulatory approval.
                </div>
                <div class="glossary-item">
                    <strong>Method Validation:</strong> Demonstrating that an analytical method is suitable for its intended purpose. ICH Q2 guidelines specify requirements.
                </div>
                <div class="glossary-item">
                    <strong>OOS (Out of Specification):</strong> Test result that falls outside approved specification range. Triggers investigation and potential batch rejection.
                </div>
                <div class="glossary-item">
                    <strong>CoA (Certificate of Analysis):</strong> Document listing all test results for a batch, certifying it meets specifications.
                </div>
            </div>
        </div>

        <div class="glossary-section">
            <h3>üìã Regulatory Terms</h3>
            <div class="glossary-grid">
                <div class="glossary-item">
                    <strong>IND (Investigational New Drug):</strong> Application to FDA requesting authorization to administer drug to humans in clinical trials.
                </div>
                <div class="glossary-item">
                    <strong>BLA (Biologics License Application):</strong> Request for permission to market a biological product. Equivalent to NDA for traditional drugs.
                </div>
                <div class="glossary-item">
                    <strong>GMP (Good Manufacturing Practice):</strong> Regulations requiring quality systems in manufacturing. 21 CFR Part 210/211 in US, EU GMP in Europe.
                </div>
                <div class="glossary-item">
                    <strong>PPQ (Process Performance Qualification):</strong> Validation demonstrating commercial process consistently produces quality product. Typically 3 consecutive conformance batches.
                </div>
                <div class="glossary-item">
                    <strong>CPV (Continued Process Verification):</strong> Ongoing monitoring post-validation to ensure process remains in state of control.
                </div>
                <div class="glossary-item">
                    <strong>CAPA (Corrective and Preventive Action):</strong> Systematic process for investigating deviations and implementing actions to prevent recurrence.
                </div>
                <div class="glossary-item">
                    <strong>21 CFR Part 11:</strong> FDA regulation on electronic records and electronic signatures. Requires audit trails, data integrity controls.
                </div>
                <div class="glossary-item">
                    <strong>ICH (International Council for Harmonisation):</strong> Organization harmonizing regulatory requirements. Publishes quality, safety, efficacy guidelines.
                </div>
            </div>
        </div>


    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis',
                padding: 25,
                rankSpacing: 100,
                nodeSpacing: 80
            },
            er: {
                useMaxWidth: true
            },
            graph: {
                useMaxWidth: true
            }
        });

        // Zoom functionality for diagrams
        const zoomStep = 0.1;
        const minZoom = 0.5;
        const maxZoom = 3;

        let currentZoom1 = 1;

        function zoomIn1() {
            if (currentZoom1 < maxZoom) {
                currentZoom1 += zoomStep;
                updateZoom1();
            }
        }

        function zoomOut1() {
            if (currentZoom1 > minZoom) {
                currentZoom1 -= zoomStep;
                updateZoom1();
            }
        }

        function resetZoom1() {
            currentZoom1 = 1;
            updateZoom1();
        }

        function updateZoom1() {
            const diagram = document.getElementById('mermaidDiagram1');
            diagram.style.transform = `scale(${currentZoom1})`;
            diagram.style.transformOrigin = 'top left';
            document.getElementById('zoomLevel1').textContent = `${Math.round(currentZoom1 * 100)}%`;
        }

        let currentZoom2 = 1;

        function zoomIn2() {
            if (currentZoom2 < maxZoom) {
                currentZoom2 += zoomStep;
                updateZoom2();
            }
        }

        function zoomOut2() {
            if (currentZoom2 > minZoom) {
                currentZoom2 -= zoomStep;
                updateZoom2();
            }
        }

        function resetZoom2() {
            currentZoom2 = 1;
            updateZoom2();
        }

        function updateZoom2() {
            const diagram = document.getElementById('mermaidDiagram2');
            diagram.style.transform = `scale(${currentZoom2})`;
            diagram.style.transformOrigin = 'top left';
            document.getElementById('zoomLevel2').textContent = `${Math.round(currentZoom2 * 100)}%`;
        }

        let currentZoom3 = 1;

        function zoomIn3() {
            if (currentZoom3 < maxZoom) {
                currentZoom3 += zoomStep;
                updateZoom3();
            }
        }

        function zoomOut3() {
            if (currentZoom3 > minZoom) {
                currentZoom3 -= zoomStep;
                updateZoom3();
            }
        }

        function resetZoom3() {
            currentZoom3 = 1;
            updateZoom3();
        }

        function updateZoom3() {
            const diagram = document.getElementById('mermaidDiagram3');
            diagram.style.transform = `scale(${currentZoom3})`;
            diagram.style.transformOrigin = 'top left';
            document.getElementById('zoomLevel3').textContent = `${Math.round(currentZoom3 * 100)}%`;
        }

        let currentZoom4 = 1;

        function zoomIn4() {
            if (currentZoom4 < maxZoom) {
                currentZoom4 += zoomStep;
                updateZoom4();
            }
        }

        function zoomOut4() {
            if (currentZoom4 > minZoom) {
                currentZoom4 -= zoomStep;
                updateZoom4();
            }
        }

        function resetZoom4() {
            currentZoom4 = 1;
            updateZoom4();
        }

        function updateZoom4() {
            const diagram = document.getElementById('mermaidDiagram4');
            diagram.style.transform = `scale(${currentZoom4})`;
            diagram.style.transformOrigin = 'top left';
            document.getElementById('zoomLevel4').textContent = `${Math.round(currentZoom4 * 100)}%`;
        }

        let currentZoom5 = 1;

        function zoomIn5() {
            if (currentZoom5 < maxZoom) {
                currentZoom5 += zoomStep;
                updateZoom5();
            }
        }

        function zoomOut5() {
            if (currentZoom5 > minZoom) {
                currentZoom5 -= zoomStep;
                updateZoom5();
            }
        }

        function resetZoom5() {
            currentZoom5 = 1;
            updateZoom5();
        }

        function updateZoom5() {
            const diagram = document.getElementById('mermaidDiagram5');
            diagram.style.transform = `scale(${currentZoom5})`;
            diagram.style.transformOrigin = 'top left';
            document.getElementById('zoomLevel5').textContent = `${Math.round(currentZoom5 * 100)}%`;
        }

        let currentZoom6 = 1;

        function zoomIn6() {
            if (currentZoom6 < maxZoom) {
                currentZoom6 += zoomStep;
                updateZoom6();
            }
        }

        function zoomOut6() {
            if (currentZoom6 > minZoom) {
                currentZoom6 -= zoomStep;
                updateZoom6();
            }
        }

        function resetZoom6() {
            currentZoom6 = 1;
            updateZoom6();
        }

        function updateZoom6() {
            const diagram = document.getElementById('mermaidDiagram6');
            diagram.style.transform = `scale(${currentZoom6})`;
            diagram.style.transformOrigin = 'top left';
            document.getElementById('zoomLevel6').textContent = `${Math.round(currentZoom6 * 100)}%`;
        }

        let currentZoom7 = 1;

        function zoomIn7() {
            if (currentZoom7 < maxZoom) {
                currentZoom7 += zoomStep;
                updateZoom7();
            }
        }

        function zoomOut7() {
            if (currentZoom7 > minZoom) {
                currentZoom7 -= zoomStep;
                updateZoom7();
            }
        }

        function resetZoom7() {
            currentZoom7 = 1;
            updateZoom7();
        }

        function updateZoom7() {
            const diagram = document.getElementById('mermaidDiagram7');
            diagram.style.transform = `scale(${currentZoom7})`;
            diagram.style.transformOrigin = 'top left';
            document.getElementById('zoomLevel7').textContent = `${Math.round(currentZoom7 * 100)}%`;
        }

        let currentZoom8 = 1;

        function zoomIn8() {
            if (currentZoom8 < maxZoom) {
                currentZoom8 += zoomStep;
                updateZoom8();
            }
        }

        function zoomOut8() {
            if (currentZoom8 > minZoom) {
                currentZoom8 -= zoomStep;
                updateZoom8();
            }
        }

        function resetZoom8() {
            currentZoom8 = 1;
            updateZoom8();
        }

        function updateZoom8() {
            const diagram = document.getElementById('mermaidDiagram8');
            diagram.style.transform = `scale(${currentZoom8})`;
            diagram.style.transformOrigin = 'top left';
            document.getElementById('zoomLevel8').textContent = `${Math.round(currentZoom8 * 100)}%`;
        }

        let currentZoom9 = 1;

        function zoomIn9() {
            if (currentZoom9 < maxZoom) {
                currentZoom9 += zoomStep;
                updateZoom9();
            }
        }

        function zoomOut9() {
            if (currentZoom9 > minZoom) {
                currentZoom9 -= zoomStep;
                updateZoom9();
            }
        }

        function resetZoom9() {
            currentZoom9 = 1;
            updateZoom9();
        }

        function updateZoom9() {
            const diagram = document.getElementById('mermaidDiagram9');
            diagram.style.transform = `scale(${currentZoom9})`;
            diagram.style.transformOrigin = 'top left';
            document.getElementById('zoomLevel9').textContent = `${Math.round(currentZoom9 * 100)}%`;
        }

        // Zoom controls for Conceptual Process Star Schema
        let currentZoomConceptProcess = 1;

        function zoomInConceptProcess() {
            if (currentZoomConceptProcess < maxZoom) {
                currentZoomConceptProcess += zoomStep;
                updateZoomConceptProcess();
            }
        }

        function zoomOutConceptProcess() {
            if (currentZoomConceptProcess > minZoom) {
                currentZoomConceptProcess -= zoomStep;
                updateZoomConceptProcess();
            }
        }

        function resetZoomConceptProcess() {
            currentZoomConceptProcess = 1;
            updateZoomConceptProcess();
        }

        function updateZoomConceptProcess() {
            const diagram = document.getElementById('mermaidDiagramConceptProcess');
            diagram.style.transform = `scale(${currentZoomConceptProcess})`;
            diagram.style.transformOrigin = 'top left';
            document.getElementById('zoomLevelConceptProcess').textContent = `${Math.round(currentZoomConceptProcess * 100)}%`;
        }

        // Zoom controls for Conceptual Analytical Star Schema
        let currentZoomConceptAnalytical = 1;

        function zoomInConceptAnalytical() {
            if (currentZoomConceptAnalytical < maxZoom) {
                currentZoomConceptAnalytical += zoomStep;
                updateZoomConceptAnalytical();
            }
        }

        function zoomOutConceptAnalytical() {
            if (currentZoomConceptAnalytical > minZoom) {
                currentZoomConceptAnalytical -= zoomStep;
                updateZoomConceptAnalytical();
            }
        }

        function resetZoomConceptAnalytical() {
            currentZoomConceptAnalytical = 1;
            updateZoomConceptAnalytical();
        }

        function updateZoomConceptAnalytical() {
            const diagram = document.getElementById('mermaidDiagramConceptAnalytical');
            diagram.style.transform = `scale(${currentZoomConceptAnalytical})`;
            diagram.style.transformOrigin = 'top left';
            document.getElementById('zoomLevelConceptAnalytical').textContent = `${Math.round(currentZoomConceptAnalytical * 100)}%`;
        }

        // Zoom controls for Conceptual Genealogy Star Schema
        let currentZoomConceptGenealogy = 1;

        function zoomInConceptGenealogy() {
            if (currentZoomConceptGenealogy < maxZoom) {
                currentZoomConceptGenealogy += zoomStep;
                updateZoomConceptGenealogy();
            }
        }

        function zoomOutConceptGenealogy() {
            if (currentZoomConceptGenealogy > minZoom) {
                currentZoomConceptGenealogy -= zoomStep;
                updateZoomConceptGenealogy();
            }
        }

        function resetZoomConceptGenealogy() {
            currentZoomConceptGenealogy = 1;
            updateZoomConceptGenealogy();
        }

        function updateZoomConceptGenealogy() {
            const diagram = document.getElementById('mermaidDiagramConceptGenealogy');
            diagram.style.transform = `scale(${currentZoomConceptGenealogy})`;
            diagram.style.transformOrigin = 'top left';
            document.getElementById('zoomLevelConceptGenealogy').textContent = `${Math.round(currentZoomConceptGenealogy * 100)}%`;
        }
    </script>
</body>
</html>
